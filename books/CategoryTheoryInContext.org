#+TITLE: Category Theory In Context

#+AUTHOR: Emily Riehl
#+EXPORT_FILE_NAME: ../latex/CategoryTheoryInContext/CategoryTheoryInContext.tex
#+LATEX_HEADER: \graphicspath{{../../books/}}
#+LATEX_HEADER: \input{preamble.tex}
#+LATEX_HEADER: \def \MODEL {\textbf{MODEL}}
#+LATEX_HEADER: \def \Cop {\calc^{\op}}
#+LATEX_HEADER: \def \fop {f^{\op}}
#+LATEX_HEADER: \def \gop {g^{\op}}
#+LATEX_HEADER: \def \Vect {\textbf{Vect}}
#+LATEX_HEADER: \def \BG {\textsf{B}G}
#+LATEX_HEADER: \def \sk {\text{sk}}
#+LATEX_HEADER: \def \Mat {\text{Mat}}
#+LATEX_HEADER: \makeindex

* Categories, Functors, Natural Transformations
** Abstract and concrete categories
    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *category* consists of
    * a collection of *objects* \(X,Y,Z,\dots\)
    * a collection of *morphisms* \(f,g,h,\dots\)


    so that
    * Each morphism has specified *domain* and *codomain* objects; the notation \(f:X\to Y\)
      signifies that \(f\) is a morphism with domain \(X\) and codomain \(Y\)
    * Each object has a designated *identity morphism* \(1_X:X\to X\)
    * For any pair of morphisms \(f,g\) with the codomain of \(f\) equal to the domain of \(g\),
      there exists a specified *composite morphism* \(gf\) whose domain is equal to the domain
      of \(f\) and whose codomain is equal to the codomain of \(g\), i.e., :
      \begin{equation*}
      f:X\to Y,\quad g:Y\to Z\hspace{0.7cm}\leadsto\hspace{0.7cm}gf:X\to Z
      \end{equation*}


    This data is subject to the following two axioms
    * For any \(f:X\to Y\), the composites \(1_Yf\) and \(f1_X\) are both equal to \(f\)
    * For any composable triple of morphisms \(f,g,h\), the composites \(h(gf)\) and \((hg)f\) are
      equal and hence denoted by \(hgf\).
      \begin{equation*}
      f:X\to Y,\quad g:Y\to Z,\quad h:Z\to W\hspace{0.7cm}\leadsto\hspace{0.7cm}hgf:X\to W
      \end{equation*}
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_examplle
    1. For any language \(\call\) and any theory \(T\) of \(\call\), there is a category \(\MODEL_T\) whose
       objects are models of \(T\). Morphisms is just homomorphisms
    2. For a fixed unital but not necessarily commutative ring \(R\), \(\Mod_R\) is the category of
       left \(R\)-modules and \(R\)-modules homomorphisms. This category is denoted by \(\Vect_{\Bbbk}\)
       when the ring happens to be a field \(\Bbbk\) and abbreviated as \(\Ab\) in the case
       of \(\Mod_{\Z}\), as a \(\Z\)-module is precisely ab abelian group
    #+END_examplle

    *Concrete categories* are those whose objects have underlying sets and whose morphisms are
    functions between underlying sets

    Abstract categories
    #+ATTR_LATEX: :options []
    #+BEGIN_examplle
    1. A group defines a category \(\BG\) with a single object
    2. A category is *discrete* if every morphism is an identity
    #+END_examplle

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A category is *small* if it has only a set's worth of arrows

    Both \(\ob(\calc)\) and \(\hom(\calc)\) are sets
    #+END_definition

    Thus it has only a set's worth of objects

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A category is *locally small* if between any pair of objects there is only a set's worth of morphisms
    #+END_definition

    The set of arrows between a pair of fixed objects in a locally small category is typically
    called a *hom-set*


    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    An *isomorphism* in a category is a morphism \(f:X\to Y\) for which there exists a
    morphism \(g:Y\to X\) so that \(gf=1_X\) and \(fg=1_X\), denoted by \(X\cong Y\)
    #+END_definition

    An *endomorphism* is a morphism whose domain equals its codomain

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *groupoid* is a category in which every morphism is an isomorphism
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    Any category \(\calc\) contains a *maximal groupoid*, the subcategory containing all of the objects
    and only those morphisms that are isomorphisms
    #+END_lemma

    #+BEGIN_exercise
    label:1.1.1
    1. Consider a morphism \(f:x\to y\). Show that if there exists a pair of
       morphisms \(g,h:y\rightrightarrows:x\) s.t. \(gf=1_x\) and \(fh=1_y\), then \(g=h\) and \(f\)
       is an isomorphism
    2. Show that a morphism can have at most one inverse isomorphism
    #+END_exercise

    #+BEGIN_proof
    1. \(g=1_xg=(hf)g=h(fg)=h1_y=h\)
    2. From 1
    #+END_proof

    #+BEGIN_exercise
    label:ex1.1.3
    For any category \(\calc\) and any object \(c\in\calc\), show that
    1. There is a category \(c/\calc\) whose objects are morphisms \(f:c\to x\) with domain \(c\) in which
       a morphism from \(f:c\to x\) to \(g:c\to y\) is a map \(h:x\to y\) between the codomains so that
       the triangle
       \begin{center}\begin{tikzcd}[column sep=small]
       &c\ar[dl,"f"']\ar[dr,"g"]\\
       x\ar[rr,"h"']&&y
       \end{tikzcd}\end{center}
       commutes.
    2. There is a category \(\calc/c\) whose objects are morphisms \(f:x\to c\) with codomain \(c\) in which
       a morphism from \(f:x\to c\) to \(g:y\to c\) is a map \(h:x\to y\) between the codomains so that
       the triangle
       \begin{center}\begin{tikzcd}[column sep=small]
       x\ar[rr,"h"]\ar[dr,"f"']&&y\ar[dl,"g"]\\
       &c
       \end{tikzcd}\end{center}
       commutes


    The category \(c/\calc\) and \(\calc/c\) are called *slice categories* of \(\calc\) *under* and *over* \(c\), respectively
    #+END_exercise
** Duality
    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    Let \(\calc\) be any category. The *opposite category* \(\calc^{\op}\) has
    * the same objects as in \(\calc\)
    * a morphism \(\fop\) in \(\Cop\) for each a morphism \(f\) in \(\calc\) so that the domain
      of \(\fop\) is defined to be the codomain of \(f\) and the codomain of \(\fop\) is defined to
      be the domain of \(f\)
    * For each object \(X\), the arrow \(1_X^{\op}\) serves as its identity in \(\Cop\)
    * A pair of morphisms \(\fop,\gop\) in \(\Cop\) is composable precisely when the pair \(g,f\) is
      composable in \(\calc\). We then define \(\gop\circ\fop\) to be \((f\circ g)^{\op}\): i.e.
      \begin{equation*}
      \dom(\fop)=\cod(f)=\dom(g)=\cod(\gop)
      \end{equation*}
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    label:lemma1.2.3
    T.F.A.E.
    1. \(f:x\to y\) is an isomorphism
    2. For all objects \(c\in\calc\), post-composition with \(f\) defines a bijection
       \begin{equation*}
       f_*:\Hom(c,x)\to\Hom(c,y)
       \end{equation*}
    3. For all objects \(c\in\calc\), pre-composition with \(f\) defines a bijection
       \begin{equation*}
       f^*:\Hom(y,c)\to\Hom(x,c)
       \end{equation*}
    #+END_lemma

    Lemma ref:lemma1.2.3 asserts that isomorphisms in a locally small category are defined
    /representably/ in terms of isomorphisms in the category of sets.

    #+BEGIN_proof
    \(2\to 1\). Let \(c=y\), since \(f_*\) in an bijection, there must be an element \(g\in\Hom(y,x)\)
    s.t. \(f_*(g)=1_y\). Hence \(fg=1_y\). Thus \(gf,1_x\) have common image under \(f_*\),
    thus \(gf=1_x\). Whence \(f\) and \(g\) are inverse isomorphisms
    #+END_proof

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A morphism \(f:x\to y\) in a category is
    1. a *monomorphism* if for any parallel morphisms \(h,k:w\rightrightarrows x\), \(fg=fk\) implies
       that \(h=k\)
    2. an *epimorphism* if for any parallel morphisms \(h,k:w\rightrightarrows x\), \(hf=kf\) implies
       that \(h=k\)
    #+END_definition

    Also, we can re-express it
    1. \(f:x\to y\) is a monomorphism in \(\calc\) iff for all
       objects \(c\in\calc\), \(f_*:\Hom(c,x)\to\Hom(c,y)\) is injective
    2. \(f:x\to y\) is an epimorphism in \(\calc\) iff for all \(c\in\calc\), \(f^*:\Hom(y,c)\to\Hom(x,c)\)  is
       injective


    #+ATTR_LATEX: :options []
    #+BEGIN_examplle
    Suppose that \(x\xrightarrow{s}y\xrightarrow{r}x\) are morphisms s.t. \(rs=1_x\). The map \(s\) is a *section* or *right
    inverse* to \(r\), while the map \(r\) defines a *retraction* or *left inverse* to \(s\). The
    maps \(s\) and \(r\) express the object \(x\) as a *retract* of the object \(y\)

    In this case, \(s\) is always a monomorphism and, dually, \(r\) is always an epimorphism. To
    ackowledge the presence of these one-sided inverses, \(s\) is said to be a *split monomorphism*
    and \(r\) is said to be a *split epimorphism*
    #+END_examplle

    #+ATTR_LATEX: :options []
    #+BEGIN_examplle
    By the previous example, an isomorphism is necessarily both monic and epic, but the converse
    need not hold in general. For example, the inclusion \(\Z\hookrightarrow\Q\) is both monic and epic in the
    category \(\Rng\), but this map is not an isomorphism: there are no ring homomorphisms
    from \(\Q\) to \(\Z\)
    #+END_examplle

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    1. If \(f:x\rightarrowtail y\) and \(g:y\rightarrowtail z\) are monomorphisms, then so
       is \(gf:x\rightarrowtail z\)
    2. If \(f:x\to y\) and \(g:y\to z\) are morphisms so that \(gf\) is monic, then \(f\) is monic


    Dually
    1. If \(f:x\twoheadrightarrow y\) and \(g:y\twoheadrightarrow z\) are epimorphisms, then so
       is \(gf:x\twoheadrightarrow z\)
    2. If \(f:x\to y\) and \(g:y\to z\) are morphisms so that \(gf\) is epic, then \(g\) is epic
    #+END_lemma

    #+BEGIN_exercise
    label:ex1.2.2
    1. Show that a morphism \(f:x\to y\) is a split epimorphism in a category \(\calc\) iff for
       all \(c\in\calc\), the post-composition function \(f_*:\Hom(c,x)\to\Hom(c,y)\) is surjective
    2. Show that a morphism \(f:x\to y\) is a split monomorphism in a category \(\calc\) iff for
       all \(c\in\calc\), the post-composition function \(f^*:\Hom(y,c)\to\Hom(x,c)\) is surjective
    #+END_exercise

    #+BEGIN_exercise
    label:ex1.2.6
    Prove that a morphism that is both a monomorphism and a split epimorphism is necessarily an
    isomorphism. Argue by duality that a split monomorphism that is an epimorphism is also an isomorphism
    #+END_exercise

    #+BEGIN_proof
    Suppose \(y\xrightarrow{g}x\xrightarrow{f}y\) and \(fg=1_y\), then \(fgf=f=f\circ 1_x\). Since \(f\) is mono, \(gf=1_x\)
    #+END_proof
** Functoriality
    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *functor* \(F:\calc\to\cald\), between categories \(\calc\) and \(\cald\), consists of the following data:
    * An object \(Fc\in\cald\), for each objects \(c\in\calc\)
    * A morphism \(Ff:Fc\to Fc'\in\cald\), for each morphism \(f:c\to c'\in\calc\)


    *Functoriality axioms*
    * For any composable pair \(f,g\in\calc\), \(Fg\circ Ff=F(g\circ f)\)
    * For each object \(c\in\calc\), \(F(1_c)=1_{Fc}\)
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *contravariant functor* \(F\) from \(\calc\) to \(\cald\) is a functor \(F:\Cop\to\cald\)
    * A morphism \(Ff:Fc'\to Fc\in\cald\) for each morphism \(f:c\to c'\in\calc\)
    * For any composable pair \(f,g\in\calc\), \(Ff\circ Fg=F(g\circ f)\)
    #+END_definition

    \begin{center}\begin{tikzcd}
    \Cop\ar[r,"F"]&\cald\\
    c\ar[r,mapsto]\ar[dd,"f"']&Fc\\
    {}\ar[r,mapsto]&{}\\
    c'\ar[r,mapsto]&Fc'\ar[uu,"Ff"']
    \end{tikzcd}\end{center}

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    Functors preserve isomorphisms
    #+END_lemma

    #+BEGIN_proof
    Consider a functor \(F:\calc\to\cald\) and an isomorphism \(f:x\to y\) in \(\calc\) with inverse \(g:y\to x\).
    Then
    \begin{equation*}
    F(g)F(f)=F(gf)=F(1_x)=1_{Fx}
    \end{equation*}
    Thus \(Fg:Fy\to Fx\) is a left inverse to \(Ff:Fx\to Fy\)
    #+END_proof

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    If \(\calc\) is locally small, then for any object \(c\in\calc\) we may define a pair of covariant and
    contravariant *functors represented by* \(c\):
    \begin{center}\begin{tikzcd}[column sep=tiny]
    \calc\ar[rrr,"{\Hom(c,-)}"]&\quad&\quad&\Sets\\
    x\ar[dd,"f"']&\ar[r,mapsto]&{}&\Hom(c,x)\ar[dd,"f_*"]\\
    {}&\ar[r,mapsto]&{}&{}\\
    y&\ar[r,mapsto]&{}&\Hom(c,y)
    \end{tikzcd}\hspace{1cm}
    \begin{tikzcd}[column sep=tiny]
    \Cop\ar[rrr,"{\Hom(-,c)}"]&\quad&\quad&\Sets\\
    x\ar[dd,"f"']&\ar[r,mapsto]&{}&\Hom(x,c)\\
    {}&\ar[r,mapsto]&{}&{}\\
    y&\ar[r,mapsto]&{}&\Hom(y,c)\ar[uu,"f^*"]
    \end{tikzcd}
    \end{center}

    #+END_definition

    Post-composition defines a *covariant* action on hom-sets

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    For any categories \(\calc\) and \(\cald\), there is a category \(\calc\times\cald\), their *product*, whose
    * objects are ordered pairs \((c,d)\), where \(c\) is an object of \(\calc\) and \(d\) is an object
      of \(\cald\)
    * morphisms are ordered pairs \((f,g):(c,d)\to(c',d')\), where \(f:c\to c'\in\calc\) and \(g:d\to d'\in\cald\) and
    * in which composition and identities are defined componentwise
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    If \(\calc\) is locally small, then there is a *two-sided represented functor*
    \begin{equation*}
    \calc(-,-):\Cop\times\calc\to\Sets
    \end{equation*}
    A pair of objects \((x,y)\) is mapped to the hom-set \(\Hom(x,y)\). A pair of
    morphisms \(f:w\to x\) and \(h:y\to z\) is sent to the function
    \begin{center}\begin{tikzcd}
    \Hom(x,y)\ar[r,"{(f^*,h_*)}"]&\Hom(w,z)\\
    g\ar[r,mapsto]&hgf
    \end{tikzcd}\end{center}


    #+END_definition

    An *isomorphism of categories* is given by a pair of inverse functors \(F:\calc\to\cald\) and \(G:\cald\to\calc\) s.t.
    the composites \(Gf\) and \(FG\), respectively, equal the identity functors on \(\calc\) and \(\cald\)

    #+BEGIN_exercise
    Given functors \(F:\bD\to\bC\) and \(G:\bE\to\bC\), show that there is a category, called the *comma
    category* \(F\downarrow G\), which has
    * as objects, triples \((d\in\bD,e\in\bE,f:Fd\to Ge\in\bC)\)
    * as morphisms \((d,e,f)\to(d',e',f')\), a pair of morphisms \((h:d\to d',k:e\to e')\) so that the
      square
      \begin{center}\begin{tikzcd}
      Fd\ar[r,"f"]\ar[d,"Fh"']&Ge\ar[d,"Gk"]\\
      Fd'\ar[r,"f'"']&Ge'
      \end{tikzcd}\end{center}
      commutes in \(\bC\), i.e., so that \(f'\cdot Fh=Gk\cdot f\)
    #+END_exercise
** Naturality
    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    Given categories \(\calc\) and \(\cald\) and functors \(F,G:\calc\rightrightarrows\cald\), a *natural
    transformation* \(\alpha:F\Rightarrow G\) consists of
    * an arrow \(\alpha_c:Fc\to Gc\) in \(\cald\) for each object \(c\in\calc\), the collection of which define the
      *components* of the natural transformation s.t. for any morphism \(f:c\to c'\) in \(\calc\), the
      following square of morphisms in \(\cald\)
      \begin{center}\begin{tikzcd}
      Fc\ar[r,"\alpha_c"]\ar[d,"Ff"']&Gc\ar[d,"Gf"]\\
      Fc'\ar[r,"\alpha_{c'}"']&Gc'
      \end{tikzcd}\end{center}
      *commutes*


    A *natural isomorphism* is a natural transformation \(\alpha:F\Rightarrow G\) in which every component \(\alpha_c\) is
    an isomorphism. In this case, the natural isomorphism may be depicted as \(\alpha:F\cong G\)

    \begin{center}\begin{tikzcd}
    A\ar[r,bend left=50,""{name=U}]\ar[r,bend right=50,""{name=D}]&B
    \ar[Rightarrow,from=U,to=D,yshift=-3pt,"\alpha"]
    \end{tikzcd}\end{center}

    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_examplle
    Consider morphism \(f:w\to x\) and \(h:y\to z\) in a locally small category \(C\). Post-composition
    by \(h\) and pre-composition by \(f\) define functions between hom-sets
    \begin{center}\begin{tikzcd}
    C(x,y)\ar[r,"h\circ-"]\ar[d,"-\circ f"]&C(x,z)\ar[d,"-\circ f"]\\
    C(w,y)\ar[r,"h\circ -"']&C(w,z)
    \end{tikzcd}\end{center}
    \(h\circ -\) is denoted by \(h_*\) and \(-\circ f\) is denoted by \(f^*\). By interpreting the
    horizontal arrows as the image of \(h\) under the actions of the functors \(C(x,-)\)
    and \(C(w,-)\), the square demonstrates that there is a natural transformation
    \begin{equation*}
    f^*:C(x,-)\Rightarrow C(w,-)
    \end{equation*}
    #+END_examplle

    #+BEGIN_exercise
    label:ex1.4.6
    Given a pair of functors \(F:\bA\times \bB\times \bB^{\op}\to \bD\) and \(G:\bA\times \bC\times \bC^{\op}\to \bD\), a family of
    morphisms
    \begin{equation*}
    \alpha_{a,b,c}:F(a,b,b)\to G(a,c,c)
    \end{equation*}
    in \(\bD\) defines the components of an *extranatural transformation* \(\alpha:F\Rightarrow G\) if for
    any \(f:a\to a'\), \(g:b\to b'\) and \(h:c\to c'\) the following diagram commutes
    \begin{center}\begin{tikzcd}
    F(a,b,b)\ar[r,"{\alpha_{a,b,c}}"]\ar[d,"{F(f,1_b,1_b)}" description]&G(a,c,c)\ar[d,"{G(f,1_c,1_c)}" description]\\
    F(a',b,b)\ar[r,"{\alpha_{a',b,c}}"']&G(a',c,c)
    \end{tikzcd}\begin{tikzcd}
    F(a,b,b')\ar[r,"{F(1_a,1_b,g)}"]\ar[d,"{F(1_a,g,1_{b'})}" description]&F(a,b,b)\ar[d,"{\alpha_{a,b,c}}" description]\\
    F(a,b',b')\ar[r,"{\alpha_{a,b',c}}"']&G(a,c,c)
    \end{tikzcd}\begin{tikzcd}
    F(a,b,b)\ar[r,"{\alpha_{a,b,c}}"]\ar[d,"{F(f,1_b,1_b)}" description]&G(a,c,c)\ar[d,"{G(f,1_c,1_c)}" description]\\
    F(a',b,b)\ar[r,"{\alpha_{a',b,c}}"']&G(a',c,c)
    \end{tikzcd}
    \end{center}
    #+END_exercise
** Equivalence of categories
    Let \(\bbone\) denote the discrete category with a single object and let \(\bbtwo\) denote the
    category with two objects \(0,1\in\bbtwo\) and a single non-identity arrow \(0\to 1\). There are two
    evident functors \(i_0,i_1:\bbone\rightrightarrows\bbtwo\) whose subscripts designate the objects
    in their image

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    Fixing a parallel pair of functors \(F,G:\bC\rightrightarrows\bD\), natural
    transformations \(\alpha:F\Rightarrow G\) correspond bijectively to functors \(H:\bC\times\bbtwo\to\bD\) s.t. \(H\)
    restricts along \(i_0\) and \(i_1\) to the functors \(F,G\), i.e., so that
    \begin{center}\begin{tikzcd}
    \bC\ar[r,"i_0"]\ar[rd,"F"']&\bC\times 2\ar[d,"H"]&\bC\ar[l,"i_1"']\ar[ld,"G"]\\
    &\bD
    \end{tikzcd}\end{center}
    commutes
    #+END_lemma

    Hence \(i_0\) denotes the functor defined on objects by \(c\mapsto(c,0)\)

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    An *equivalence of categories* consists of functors \(F:\bC\leftrightarrows \bD:G\) together with
    natural isomorphisms \(\eta:1_{\bC}\cong GF\), \(\epsilon:FG\cong 1_{\bD}\). Categories \(\bC\)  and \(\bD\) are
    *equivalent*, written \(\bC\simeq\bD\), if there exists an equivalence between them
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    If \(\bC\simeq\bD\) and \(\bD\simeq\bE\), then \(\bC\simeq\bE\)
    #+END_lemma

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A functor \(F:\bC\to\bD\) is
    * *full* if for each \(x,y\in\bC\), the map \(\bC(x,y)\to \bD(Fx,Fy)\) is surjective
    * *faithful* if for each \(x,y\in\bC\), the map \(\bC(x,y)\to\bD(Fx,Fy)\) is injective
    * *essentially surjective on objects* if for every object \(d\in\bD\) there is \(c\in\C\) s.t. \(d\) is
      isomorphic to \(Fc\)
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    label:lemma1.5.10
    Any morphism \(f:a\to b\) and fixed isomorphism \(a\cong a'\) and \(b\cong b'\) determine a unique
    morphism \(f':a'\to b'\) so that any of - or, equivalently, all of - the following four diagrams
    commutes
    \begin{center}\begin{tikzcd}
    a\ar[d,"f"']&a'\ar[l,"\cong"']\ar[d,"f'"]\\
    b\ar[r,"\cong"']&b'
    \end{tikzcd}\begin{tikzcd}
    a\ar[r,"\cong"]\ar[d,"f"']&a'\ar[d,"f'"]\\
    b\ar[r,"\cong"']&b'
    \end{tikzcd}\begin{tikzcd}
    a\ar[d,"f"']&a'\ar[l,"\cong"']\ar[d,"f'"]\\
    b&b'\ar[l,"\cong"]
    \end{tikzcd}\begin{tikzcd}
    a\ar[r,"\cong"]\ar[d,"f"']&a'\ar[d,"f'"]\\
    b&b'\ar[l,"\cong"]
    \end{tikzcd}\end{center}
    #+END_lemma

    #+ATTR_LATEX: :options [characterizing equivalences of categories]
    #+BEGIN_theorem
    label:thm1.5.9
    A functor defining an equivalence of categories is full, faithful and essentially surjective on
    objects. Assuming the axiom of choice, any functor with these properties defines an equivalence
    of categories
    #+END_theorem

    #+BEGIN_proof
    First suppose that \(F:\bC\leftrightarrows\bD:G\), \(\eta:1_{\bC}\cong GF\) and \(\epsilon:FG\cong 1_{\bD}\) define an
    equivalence of categories. For any \(d\in\bD\), the component of the natural
    isomorphism \(\epsilon_d:FGd\cong d\) demonstrates that \(F\) is essentially surjective. Consider a
    parallel pair \(f,g:c\rightrightarrows c'\) in \(\bC\). If \(Ff=Fg\), then both \(f\) and \(g\)
    define an arrow \(c\to c'\) making the diagram
    \begin{center}\begin{tikzcd}
    c\ar[r,"\eta_c","\cong"']\ar[d,"f\text{ or }g" description]&GFc\ar[d,"GFf=GFg" description]\\
    c'\ar[r,"cong","\eta_{c'}"']&GFc'
    \end{tikzcd}\end{center}
    that expresses the naturality of \eta commute. Lemma implies that there is a unique arrow \(c\to c'\)
    with this property, whence \(f=g\). Thus \(F\) is faithful and by symmetry, so is \(G\).
    Given \(k:Fc\to Fc'\), by Lemma ref:lemma1.5.10, \(Gk\) and the isomorphism \(\eta_c\) and \(\eta_{c'}\)
    define a unique \(h:c\to c'\) for which both \(Gk\) and \(GFh\) make the diagram
    \begin{center}\begin{tikzcd}
    c\ar[r,"\eta_c","\cong"']\ar[d,dashed,"h"']&GFc\ar[d,"Gk\text{ or }GFh" description]\\
    c'\ar[r,"\cong","\eta_{c'}"']&GFc'
    \end{tikzcd}\end{center}
    commute. By Lemma ref:lemma1.5.10, \(GFh=Gk\)

    For the converse, suppose now that \(F:\bC\to\bD\) is full, faithful and essentially surjective on
    objects. Using essential surjectivity and the axiom of choice, choose, for each \(d\in\bD\), an
    object \(Gd\in\bC\) and an isomorphism \(\epsilon_d:FGd\cong d\). For each \(l:d\to d'\), Lemma ref:lemma1.5.10
    defines a unique morphism making the square
    \begin{center}\begin{tikzcd}
    FGd\ar[r,"\epsilon_d","\cong"']\ar[d,dashed]&d\ar[d,"l"]\\
    FGd'\ar[r,"\cong","\epsilon_{d'}"']&d'
    \end{tikzcd}\end{center}
    commute. Since \(F\) is fully faithful, there is a unqiue morphism \(Gd\to G'\) with this image
    under \(F\), which we define to be \(Gl\).
    #+END_proof

    A category is *connected* if any pair of objects can be connected by a finite zig-zag of morphisms

    #+ATTR_LATEX: :options []
    #+BEGIN_proposition
    Any connected groupoid is equivalent, as a category, to the automorphism group of any of its objects.
    #+END_proposition

    #+BEGIN_proof
    Choose any object \(g\) of a connected groupoid \(\bG\) and let \(G=\bG(g,g)\) denote its
    automorphism group. The inclusion \(\bB G\hookrightarrow\bG\) mapping the unique object of \(\bB G\) to \(g\in\bG\) is
    full and faithful, by definition, and essentially surjective, since \(\bG\) was assumed to be
    connected. Apply Theorem ref:thm1.5.9
    #+END_proof

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A category \(\bC\) is *skeletal* if it contains just one object in each isomorphism class. The
    *skeleton* \(\sk\bC\) of a category \(\bC\) is the unique skeletal category that is equivalent to \(\bC\)
    #+END_definition
** The art of the diagram chase
    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *monoid* is an object \(M\in\Sets\) together with a pair of morphisms \(\mu:M\times M\to M\) and \(\eta:1\to M\)
    so that the following diagrams commute:
    \begin{center}\begin{tikzcd}
    M\times M\times M\ar[r,"1_M\times\mu"]\ar[d,"\mu\times 1_M"]&M\times M\ar[d,"\mu"]\\
    M\times M\ar[r,"\mu"']&M
    \end{tikzcd}\quad
    \begin{tikzcd}
    M\ar[r,"\eta\times 1_M"]\ar[rd,"1_M"']&M\times M\ar[d,"\mu"]&M\ar[l,"1_M\times\eta"]\ar[ld,"1_M"]\\
    &M
    \end{tikzcd}
    \end{center}
    #+END_definition

    \mu defines a binary "multiplication" operation on \(M\). \eta identifies an element \(\eta\in M\)

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *diagram* in a category \(\bC\) is a functor \(F:\bJ\to\bC\) whose domain, the *indexing category*, is a
    small category
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    Functors preserve commutative diagrams
    #+END_lemma

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    Suppose \(f_1,\dots,f_n\) is a composable sequence - a "path" - of morphisms in a category. If the
    composite \(f_kf_{k-1}\dots f_{i+1}f_i\) equals \(g_m\cdots g_1\), for another composable sequence of
    morphisms \(g_1,\dots,g_m\), then \(f_n\cdots f_1=f_n\cdots f_{k+1}g_m\cdots g_1f_{i-1}\cdots f_1\)
    #+END_lemma

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    For any commutative square \(\beta\alpha=\delta\gamma\) in which each of the morphisms is an isomorphism, then the
    inverses define a commutative square \(\alpha^{-1}\beta^{-1}=\gamma^{-1}\delta^{-1}\)
    #+END_lemma

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    An object \(i\in\bC\) is *initial* if for every \(c\in\bC\) there is a unique morphism \(i\to c\). Dually,
    an object \(t\in\bC\) is *terminal* if for every \(c\in\bC\) there is a unique morphism \(c\to t\)
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    Let \(f_1,\dots,f_n\) and \(g_1,\dots,g_m\) be composable sequences of morphisms so that the domain
    of \(f_1\) equals the domain of \(g_1\) and the codomain of \(f_n\) equals the codomain
    of \(g_m\). If this common codomain is a terminal object, or if this common domain is an initial
    object, then \(f_n\cdots f_1=g_m\cdots g_1\)
    #+END_lemma

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *concrete category* is a category \(\bC\) equipped with a faithful functor \(U:\bC\to\Sets\)
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    If \(U:\bC\to\bD\) is faithful, then any diagram in \(\bC\) whose image commutes in \(\bD\) also commutes
    in \(\bC\)
    #+END_lemma

    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    Consider morphisms with the induced sources and targets
    \begin{center}\begin{tikzcd}
    a\ar[r,"f"]\ar[d,"g"]&b\ar[r,"j"]\ar[d,"h"]&c\ar[d,"l"]\\
    a'\ar[r,"k"']&b'\ar[r,"m"']&c'
    \end{tikzcd}\end{center}
    and suppose that the outer rectangle commutes. This data defines a commutative rectangle if
    either
    1. the right-hand square commutes and \(m\) is a monomorphism
    2. the left-hand square commutes and \(f\) is an epimorphism
    #+END_lemma
** The 2-category of categories
    For any fixed pair of categories \(\bC\) and \(\bD\), there is a *functor category* \(\sfD^{\sfC}\)
    whose objects are functors \(\sfC\to\sfD\) and whose morphisms are natural transformations.

    #+ATTR_LATEX: :options [vertical composition]
    #+BEGIN_lemma
    label:lemma1.7.1
    Suppose \(\alpha:F\Rightarrow G\) and \(\beta:G\Rightarrow H\) are natural transformations between parallel
    functors \(F,G,H:\bC\to\bD\). Then there is a natural transformation \(\beta\cdot\alpha:F\Rightarrow H\) whose composites
    \begin{equation*}
    (\beta\cdot\alpha)_c:=\beta_c\cdot\alpha_c
    \end{equation*}
    are defined to be the composites of the components of \alpha and \beta
    #+END_lemma

    #+BEGIN_proof
    \begin{center}\begin{tikzcd}
    Fc\ar[r,"\alpha_c"]\ar[d,"Ff"]&Gc\ar[r,"\beta_c"]\ar[d,"Gf"]&Hc\ar[d,"Hf"]\\
    Fc'\ar[r,"\alpha_{c'}"']& Gc'\ar[r,"\beta_{c'}"]&Hc'
    \end{tikzcd}\end{center}
    #+END_proof

    #+ATTR_LATEX: :options []
    #+BEGIN_corollary
    For any pair of categories \(\bC\) and \(\bD\), the functors from \(\bC\) to \(\bD\) and natural
    transformations between them define a category \(\bD^{\bC}\)
    #+END_corollary

    The composition operation defined in Lemma ref:lemma1.7.1 is called *vertical composition*.
    Drawing the parallel functors horizontally, a composable pair of natural transformations in the
    category \(\bD^{\bC}\) fits into a *pasting diagram*

    #+ATTR_LATEX: :width .5\textwidth
    #+NAME:
    #+CAPTION:
    [[../images/CategoryTheoryInContext/1.png]]

    There is also a *horizontal composition* operation
    #+ATTR_LATEX: :width .5\textwidth
    #+NAME:
    #+CAPTION:
    [[../images/CategoryTheoryInContext/2.png]]
    defined by the following lemma

    #+ATTR_LATEX: :options [horizontal composition]
    #+BEGIN_lemma
    label:1.7.4
    Given a pair of natural transformations
    #+ATTR_LATEX: :width .4\textwidth
    #+NAME:
    #+CAPTION:
    [[../images/CategoryTheoryInContext/3.png]]
    there is a natural transformation \(\beta*\alpha:HF\Rightarrow KG\) whose component at \(c\in C\) is defined as the
    composite of the following commutative square
    \begin{center}\begin{tikzcd}
    HFc\ar[r,"\beta_{F_c}"]\ar[rd,dashed,"(\beta*\alpha)_c" description]\ar[d,"H\alpha_c"']
    &KFc\ar[d,"K\alpha_c"]\\
    HGc\ar[r,"\beta_{G_c}"']&KGc
    \end{tikzcd}\end{center}

    #+END_lemma

    #+BEGIN_proof
    We define \((\beta*\alpha)_c=\beta_{Gc}\circ H\alpha_C=K\alpha_c\circ \beta_{Fc}\), then to prove the naturality of \((\beta*\alpha)_c\), we
    only need to show the following diagram commutes
    #+ATTR_LATEX: :width .5\textwidth
    #+NAME:
    #+CAPTION:
    [[../images/CategoryTheoryInContext/4.png]]
    #+END_proof

    #+ATTR_LATEX: :options [middle four interchange]
    #+BEGIN_lemma
    Given functors and natural transformations
    #+ATTR_LATEX: :width .3\textwidth
    #+NAME:
    #+CAPTION:
    [[../images/CategoryTheoryInContext/5.png]]

    the natural transformation \(JF\Rightarrow LH\) defined by first composing vertically and then composing
    horizontally equals the natural transformation defined by first composing horizontally and then
    composing vertically
    #+ATTR_LATEX: :width .6\textwidth
    #+NAME:
    #+CAPTION:
    [[../images/CategoryTheoryInContext/6.png]]

    #+END_lemma

    #+BEGIN_proof
    \begin{center}\begin{tikzcd}
    JFC\ar[r,"\gamma_{Fc}"]\ar[dr,"(\gamma*\alpha)_c"description]\ar[d,"J\alpha_c"']\ar[dd,bend right=40,"J(\alpha\cdot\beta)_c"']
    \ar[rr,bend left=40,"(\delta\cdot\gamma)_{Fc}"]
    &KFc\ar[r,"\delta_{Fc}"]\ar[d,"K\alpha_c"]&LFc\ar[d,"L\alpha_c"']\ar[dd,bend left=40,"L(\alpha\cdot\beta)_c"]\\
    JGc\ar[r,"\gamma_{Gc}"]\ar[d,"J\beta_c"]&KGc\ar[r,"\delta_{Gc}"]\ar[d,"K\beta_c"']\ar[dr,"(\delta*\beta)_{c}"description]
    &LGc\ar[d,"L\beta_c"]\\
    JHc\ar[r,"\gamma_{Hc}"]\ar[rr,bend right=40,"(\delta\cdot\gamma)_{Hc}"']&KHc\ar[r,"\delta_{Hc}"]&LHc
    \end{tikzcd}\end{center}

    #+END_proof

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *2-category* is comprised of
    * objects, e.g., the categories \(\bC\)
    * 1-morphisms between pairs of objects, e.g., the functors \(\bC\xrightarrow{F}\bD\)
    * 2-morphisms between parallel pairs of 1-morphisms, e.g., the natural transformations

    so that
    * the objects and 1-morphisms form a category, with identities \(1_{\bC}:\bC\to\bC\)
    * For each fixed pair of objects \(\bC\)  and \(\bD\), the 1-morphisms \(F:\bC\to\bD\) and 2-morphisms
      between such form a category under an operation called vertical composition
    * There is also a category whose objects are the objects in which a morphism from \(\bC\) to \(\bD\)
      is a 2-cell
      \begin{equation*}
      \nat{\bC}{\bD}{F}{G}{\alpha}
      \end{equation*}
      under an operation called horizontal composition, with identities
      \begin{equation*}
      \nat{\bC}{\bC}{1_{\bC}}{1_{\bC}}{1_{1_{\bC}}}
      \end{equation*}
    * law of middle four interchange holds
    #+END_definition

    #+BEGIN_exercise
    label:ex1.7.7
    Prove that a bifunctor \(F:\bC\times\bD\to\bE\) determines and is uniquely determined by
    1. A functor \(F(c,-):\bD\to\bE\) for each \(c\in \bC\)
    2. A natural transformation \(F(f,-):F(c,-)\Rightarrow F(c',-)\) for each \(f:c\to c'\) in \(\bC\), defined
       functorially in \(\bC\)


    In other words, prove that there is a bijection between functors \(\bC\times\bD\to\bE\) and functors \(\bC\to\bE^{\bD}\).
    #+END_exercise

    #+BEGIN_proof
    1.
    #+END_proof
* Universal Properties, Representability, and the Yoneda Lemma
** Representable Functors
    \begin{center}\begin{tikzcd}[column sep=tiny]
    \calc\ar[rrr,"{\Hom(c,-)}"]&\quad&\quad&\Sets\\
    x\ar[dd,"f"']&\ar[r,mapsto]&{}&\Hom(c,x)\ar[dd,"f_*"]\\
    {}&\ar[r,mapsto]&{}&{}\\
    y&\ar[r,mapsto]&{}&\Hom(c,y)
    \end{tikzcd}hspace{1cm}
    \begin{tikzcd}[column sep=tiny]
    \Cop\ar[rrr,"{\Hom(-,c)}"]&\quad&\quad&\Sets\\
    x\ar[dd,"f"']&\ar[r,mapsto]&{}&\Hom(x,c)\\
    {}&\ar[r,mapsto]&{}&{}\\
    y&\ar[r,mapsto]&{}&\Hom(y,c)\ar[uu,"f^*"]
    \end{tikzcd}
    \end{center}

    #+ATTR_LATEX: :options [a representable characterization of initial or terminal objects]
    #+BEGIN_definition
    1. An object \(c\) in a category \(\bC\) is *initial* iff the functor \(\bC(c,-):\bC\to\Sets\) is
       naturally isomorphic to the constant functor \(*:\bC\to\Sets\) that sends every object to the
       single set
    2. An object \(c\in\bC\) is *terminal* iff the functor \(\bC(-,c):\bC^{\op}\to\Sets\) is naturally
       isomorphic to the constant functor \(*:\bC^{\op}\to\Sets\) that sends every object to the
       singleton set
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    1. A covariant or contravariant functor \(F\) from a locally small category \(\bC\) to \(\Sets\)
       is *representable* if there is an object \(c\in\bC\) and a naturally isomorphism between \(F\) and
       the functor of appropriate variance represented by \(c\), in which case one says that the
       functor \(F\) is *represented by* the object \(c\)
    2. A *representation* for a functor \(F\) is a choice of object \(c\in\bC\) together with a specified
       natural isomorphism \(\bC(c,-)\cong F\), if \(F\) is covariant, or \(\bC(-,c)\cong F\), if \(F\) is contravariant
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_examplle
    1. The identity functor \(1_{\Set}:\Set\to\Set\) is represented by the singleton set \(1\). That
       is, for any set \(X\), there is a natural isomorphism \(\Set(1,X)\cong X\) that defines a
       bijection between elements \(x\in X\) and functions \(x:1\to X\) carrying the singleton element
       to \(x\). Naturality says that for any \(f:X\to Y\) the diagram
       \begin{center}\begin{tikzcd}
       \Set(1,X)\ar[r,"\cong"]\ar[d,"f_*"']&X\ar[d,"f"]\\
       \Set(1,Y)\ar[r,"\cong"']&Y
       \end{tikzcd}\end{center}
       commutes
    2. The forgetful functor \(U:\Group\to\Set\) is represented by the group \(\Z\). That is, for any
       group \(G\), there is a natural isomorphism \(\Group(\Z,G)\cong UG\) that associates, to every
       element \(g\in UG\), the unique homomorphism \(\Z\to G\) that maps the integer 1 to \(g\).
    #+END_examplle
** The Yoneda Lemma
    Given a functor \(F:\bC\to\Set\), what data is needed to define a natural
    transformation \(\bC(c,-)\cong F\)

    #+ATTR_LATEX: :options [Yoneda lemma]
    #+BEGIN_theorem
    label:2.2.4
    For any functor \(F:\bC\to\Set\), whose domain \(\bC\) is locally small and any object \(c\in\bC\), there
    is a bijection
    \begin{equation*}
    \Hom(\bC(c,-),F)\cong Fc
    \end{equation*}
    that associates a natural transformation \(\alpha:\bC(c,-)\Rightarrow F\) to the element \(\alpha_c(1_c)\in Fc\).
    Moreover, this correspondence is natural in both \(c\) and \(F\)
    #+END_theorem

    #+BEGIN_proof
    There is clearly a function \(\Phi:\Hom(\bC(c,-),F)\to Fc\) that maps a natural
    transformation \(\alpha:\bC(c,-)\Rightarrow F\) to the image of \(1_c\) under the component
    function \(\alpha_c:\bC(c,c)\to Fc\), i.e.,
    \begin{equation*}
    \Phi:\Hom(\bC(c,-),F)\to Fc\hspace{1cm}\Phi(\alpha):=\alpha_c(1_c)
    \end{equation*}
    Our first aim is to define an inverse function \(\Psi:Fc\to\Hom(\bC(c,-),F)\) that constructs a natural
    transformation \(\Psi(x):\bC(c,-)\Rightarrow F\) from any \(x\in Fc\). To this end, we must define
    components \(\Psi(x)_d:\bC(c,d)\to Fd\) so that natural squares, such as
    \begin{center}\begin{tikzcd}
    \bC(c,c)\ar[r,"\Psi(x)_c"]\ar[d,"f_*"']&Fc\ar[d,"Ff"]\\
    \bC(c,d)\ar[r,"\Psi(x)_d"']&Fd
    \end{tikzcd}\end{center}
    commute. Note that
    \begin{equation*}
    \Psi(x)_df_*(1_c)=\Psi(x)_d(f)=Ff\Psi(x)_c(1_c)
    \end{equation*}
    For \Psi to define an inverse for \Phi, we must define \(\Psi(x)_c(1_c)=x\). Now naturality forces us to
    define
    \begin{equation*}
    \Psi:Fc\to\Hom(\bC(c,-),F)\hspace{1cm}\Psi(x)_d(f):=Ff(x)
    \end{equation*}

    It remains to verify that \(\Psi(x)\) is natural. For any \(g:d\to e\) in \(\bC\), we need to show
    \begin{center}\begin{tikzcd}
    \bC(c,d)\ar[r,"\Psi(x)_d"]\ar[d,"g_*"']&Fd\ar[d,"Fg"]\\
    \bC(c,e)\ar[r,"\Psi(x)_e"']&Fe
    \end{tikzcd}\end{center}
    commutes. For
    any \(f\in\bC(c,d)\), \(\Psi(x)_e(g_*)(f)=\Psi(x)_e(gf)=F(gf(x))\). \(Fg(\Psi(x)_d(f))=Fg(Ff(x))=F(gf(x))\).
    Thus \Psi is natural

    By construction, \(\Phi\Psi(x)=\Psi(x)_c(1_c)=x\). We wish to show that \(\Psi\Phi(\alpha)=\alpha\). By definition,
    \begin{equation*}
    \Psi(\alpha_c(1_c))_d(f)=Ff(\alpha_c(1_c))
    \end{equation*}
    By naturality of \alpha, the square
    \begin{center}\begin{tikzcd}
    \bC(c,c)\ar[r,"\alpha_c"]\ar[d,"f_*"]&Fc\ar[d,"Ff"]\\
    \bC(c,d)\ar[r,"\alpha_d"']&Fd
    \end{tikzcd}\end{center}
    commutes, from which we see that \(Ff(\alpha_c(1_c))=\alpha_d(f)\). Thus \(\Psi(\alpha_c(1_c))_d=\alpha_d\)

    Now we prove the naturality. The naturality in the statement of the Yoneda lemma amounts to the
    following pair of assertions. Naturality in the functor asserts that, given a natural
    transformation \(\beta:F\Rightarrow G\), the element of \(Gc\) representing the composite natural
    transformation \(\beta\alpha:\bC(c,-)\Rightarrow F\Rightarrow G\) is the image under \(\beta_c:Fc\to Gc\) of the element of \(Fc\)
    representing \(\alpha:\bC(c,-)\Rightarrow F\), i.e. \(\Phi:\Hom(\bC(c,-),-)\Rightarrow(-)c\), the diagram
    \begin{center}\begin{tikzcd}
    \Hom(\bC(c,-),F)\ar[r,"\Phi_F","\cong"']\ar[d,"\beta_*"']&Fc\ar[d,"\beta_c"]\\
    \Hom(\bC(c,-),G)\ar[r,"\Phi_G"',"\cong"]&Gc
    \end{tikzcd}\end{center}
    commutes in \(\Set\). By definition, \(\Phi_G(\beta\cdot\alpha)=(\beta\cdot\alpha)_c(1_c)\), which is \(\beta_c(\alpha_c(1_c))\) by
    the definition of vertical composition of natural transformation given in Lemma ref:lemma1.7.1,
    and this is \(\beta_c(\Phi_F(\alpha))\)

    Naturality in the objects asserts that, given a morphism \(f:c\to d\) in \(\bC\),  the diagram
    \begin{center}\begin{tikzcd}
    \Hom(\bC(c,-),F)\ar[r,"\Phi_c"]\ar[r,"\cong"']\ar[d,"(f^*)^*"]&Fc\ar[d,"Ff"]\\
    \Hom(\bC(d,-),F)\ar[r,"\Phi_d"']\ar[r,"\cong"]&Fd
    \end{tikzcd}\end{center}
    Here the image of \(\alpha\in\Hom(\bC(c,-),F)\) along the top-right composite is \(Ff(\alpha_c(1_c))\), and
    the image along the left-bottom composite is \((\alpha\cdot f^*)_d(1_d)=\alpha_d(f)\)


    #+END_proof

    #+BEGIN_remark
    Were it not for size issues, we could express Theorem ref:2.2.4 more precisely as saying that
    the maps \Phi define the components of a natural isomorphism between two functors that we now
    introduce. The pair \(c\) and \(F\) in the statement of the Yoneda lemma define an object in the
    product category \(\bC\times\Set^{\bC}\). There is a bifunctor \(\ev:\bC\times\Set^{\bC}\to\Set\) that
    maps \((c,F)\) to the set \(Fc\). This functor defines the codomain of the natural isomorphism
    \Phi

    The definition of the domain of \Phi makes use of a functor
    \begin{center}\begin{tikzcd}
    \bC^{\op}\ar[rrr,"y"]&&&\Set^{\bC}\\
    c\ar[dd,"f"']&\ar[r,mapsto]&{}&\bC(c,-)\\
    &\ar[r,\mapsto]&{}&\\
    d&\ar[r,\mapsto]&{}&\bC(d,-)\ar[uu,"f^*"]
    \end{tikzcd}\end{center}

    #+END_remark

    #+ATTR_LATEX: :options [Yoneda embedding]
    #+BEGIN_definition
    label:2.2.8
    The functors
    \begin{center}\begin{tikzcd}
    \bC\ar[rrr,hook,"y"]&&&\Set^{\bC^{\op}}\\
    c\ar[dd,"f"]&\ar[r,mapsto]&{}&\bC(-,c)\ar[dd,"f_*"]\\
    &\ar[r,\mapsto]&{}&\\
    d&\ar[r,\mapsto]&{}&\bC(-,d)
    \end{tikzcd}
    \begin{tikzcd}
    \bC^{\op}\ar[rrr,hook,"y"]&&&\Set^{\bC}\\
    c\ar[dd,"f"]&\ar[r,mapsto]&{}&\bC(c,-)\\
    &\ar[r,\mapsto]&{}&\\
    d&\ar[r,\mapsto]&{}&\bC(d,-)\ar[uu,"f^*"']
    \end{tikzcd}\end{center}
    define full and faithful embeddings
    #+END_definition

    via Exercise ref:ex1.7.7, the co- and contravariant Yoneda embeddings are really just two
    different incarnations of a common bifunctor
    \begin{equation*}
    \bC(-,-):\bC^{\op}\times\bC\to\Set
    \end{equation*}

    #+BEGIN_proof
    As \(\Hom(\bC(c,-),F)\cong Fc\) where \(F\in\Set^{\bC}\), consider \(F=\bC(d,-)\). Then
    \begin{equation*}
    \Hom(\bC(c,-),\bC(d,-))\cong \bC(d,c)=\bC^{\op}(c,d)
    \end{equation*}

    The functors \(y:\bC\hookrightarrow\Set^{\bC^{\op}}\) and \(y:\bC^{\op}\hookrightarrow\Set^{\bC}\) are fully faithful if they define
    local bijections between hom-sets
    \begin{equation*}
    \bC(c,d)\xrightarrow{\cong}\Hom(\bC(-,c),\bC(-,d))\hspace{1cm}\bC(c,d)\xrightarrow{\cong}\Hom(\bC(d,-),\bC(c,-))
    \end{equation*}
    From the construction of the functors \(y\), it is easy to see that these maps are injections:
    distinct morphisms \(c\rightrightarrows d\) induce distinct natural transformations. The Yoneda
    lemma implies that every natural transformation between represented functors arises in this way.
    #+END_proof

    #+ATTR_LATEX: :options []
    #+BEGIN_corollary
    Every row operation on matrices with \(n\) rows is defined by left multiplication by
    some \(n\times n\) matrix, namely obtained by performing the row operation on the identity matrix
    #+END_corollary

    #+BEGIN_proof
    Recall that \(\Mat_R\) is the category whose objects are positive integers and in which a
    morphism \(m\to n\) is an \(n\times m\) matrix, with \(n\) rows and \(m\) columns, whose entries are
    elements of the unital ring \(R\). The elements in the image of the represented
    functor \(\Hom(0,n)\) are matrices with \(n\) rows. The row operations of elementary linear
    algebra - for instance, replacing the \(i\)th row with the sum of the \(i\)th and \(j\)th row -
    define natural endomorphisms of \(\Hom(-,n)\); naturality follows from linearity of (right)
    matrix multiplication. Thus, by Corollary ref:2.2.8, every row operation must be definable by
    left multiplication by a suitable \(n\times n\) matrix. Moreover, Theorem ref:2.2.4 allows us to
    identify this matrix: it is obtained by applying the row operation in question to the \(n\times n\)
    identity matrix
    #+END_proof

    #+BEGIN_exercise
    TFAE
    1. \(f:x\to y\) is an isomorphism in \(\bC\)
    2. \(f_*:\bC(-,x)\Rightarrow\bC(-,y)\) is a natural isomorphism
    #+END_exercise

    #+BEGIN_proof
    corollary of ref:2.2.8?
    #+END_proof

** Universal properties and universal elements
    In a locally small category \(\bC\), any pair of isomorphic objects \(x\cong y\) are *representably
    isomorphic*, meaning that \(\bC(-,x)\cong\bC(-,y)\) and \(\bC(x,-)\cong\bC(y,-)\).

    #+ATTR_LATEX: :options []
    #+BEGIN_proposition
    Consider a pair of objects \(x\) and \(y\) in a locally small category \(\bC\)
    1. If either the co- or contravariant functors represented by \(x\) and \(y\) are naturally
       isomorphic, then \(x\) and \(y\) are isomorphic
    2. If \(x\) and \(y\) represent the same functor, then \(x\) and \(y\) are isomorphic
    #+END_proposition

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    A *universal property* of an object \(c\in\bC\) is expressed by a representable functor \(F\) together
    with a *universal element* \(x\in Fc\) that defines a natural isomorphism \(\bC(c,-)\cong F\)
    or \(\bC(-,c)\cong F\), as appropriate, via the Yoneda lemma
    #+END_definition

** The category of elements
    The universal element is either initial or terminal in an appropriate category
    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    The *category of elements* \(\int F\) of a covariant functor \(F:\bC\to\Set\) has
    * as objects, pairs \((c,x)\) where \(c\in\bC\) and \(x\in Fc\)
    * a morphism \((c,x)\to(c',x')\) is a morphism \(f:c\to c'\) in \(\bC\) so that \(Ff(x)=x'\)


    The category has an evident forgetful function \(\Pi:\int F\to\bC\)
    #+END_definition

    #+ATTR_LATEX: :options []
    #+BEGIN_definition
    The *category of elements* \(\int F\) of a contravariant functor \(F:\bC^{\op}\to\Set\) has
    * as objects, pairs \((c,x)\) where \(c\in\bC\) and \(x\in Fc\)
    * a morphism \((c,x)\to (c',x')\) is a morphism \(f:c\to c'\) in \(\bC\) so that \(Ff(x')=x\)
    #+END_definition

    Objects in the category of elements of \(\bC(c,-)\) are morphisms \(f:c\to x\) in \(\bC\), i.e., the
    objects of \(\int\bC(c,-)\) are morphisms in \(\bC\) with domain \(c\). A morphism from \(f:c\to x\)
    to \(g:c\to y\) is a morphism \(h:x\to y\) so that \(g=hf\). This is the slice category \(c/\bC\)
    under the object \(c\in\bC\)

    The Yoneda lemma supplies an alternative definition of the category of elements of \(F\). In the
    contravariant case, objects \((c,x)\in\int F\) are in bijection with natural
    transformations \(\Psi(x):\bC(-,c)\Rightarrow F\) whose domain is a represented functor and whose codomain
    is \(F\). A morphism form \(\Psi(x)\) to a second element \(\Psi(x'):\bC(-,c')\Rightarrow F\) is a natural
    transformation \(\bC(-,c)\Rightarrow\bC(-,c')\)
    i.e., by Corollary ref:2.2.8, is a morphism \(f:c\to c'\) - so that the triangle of
    natural transformations
    \begin{center}\begin{tikzcd}
    \bC(-,c)\ar[r,"\Psi(x)",Rightarrow]\ar[d,"f_*",Rightarrow]&F\\
    \bC(-,c')\ar[ur,"\Psi(x')"',Rightarrow]
    \end{tikzcd}$\quad\leftrightsquigarrow\quad$
    \begin{tikzcd}
    x\in Fc\\
    x'\in Fc'\ar[u,"Ff"]
    \end{tikzcd}\end{center}





    #+ATTR_LATEX: :options []
    #+BEGIN_lemma
    For \(F:\bC^{\op}\to\Set\), the category of elements is isomorphic to the comma category
    \begin{equation*}
    \int F\cong y\downarrow F
    \end{equation*}
    defined relative to the Yoneda embedding \(y:\bC\to\Set^{\bC^{\op}}\) and the object \(F:\bbone\to\Set^{\bC^{\op}}\)
    #+END_lemma

    #+ATTR_LATEX: :options [universal elements are universal elements]
    #+BEGIN_proposition
    A covariant set-valued functor is representable iff its category of elements has an initial
    object. Dually, a contravariant set-valued functor is representable iff its category of elements
    has a terminal object
    #+END_proposition

    1#+BEGIN_proof
    A natural isomorphism \(\bC(c,-)\cong F\) induces an isomorphism of categories \(\int F\cong\int \bC(c,-)\cong c/\bC\)
    and the latter has an initial object: the identity \(1_c\in c/\bC\).

    Consider a functor \(F:\bC\to\Set\) and suppose \((c,x)\in\int F\) is initial. We will show that the
    natural transformation \(\Psi(x):\bC(c,-)\Rightarrow F\) defined by the Yoneda lemma is a natural isomorphism.
    For any \(y\in Fd\), initiality of \(x\in Fc\) says there exists a unique morphism \((c,x)\to(d,y)\),
    i.e., a unique morphism \(f:c\to d\) in \(\bC\) so that \(Ff(x)=y\). As \(y\) runs through the
    elements of the set \(Fd\), this says exactly that the component \(\Psi(x)_d:\bC(c,d)\to Fd\) is an isomorphism
    #+END_proof





* TODO CHECK
    ref:1.7.4
