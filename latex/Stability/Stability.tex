% Created 2021-12-01 Wed 15:05
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\graphicspath{{../../books/}}
\input{../preamble.tex}
\makeindex
\author{Qi'ao Chen}
\date{\today}
\title{Stability}
\hypersetup{
 pdfauthor={Qi'ao Chen},
 pdftitle={Stability},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 27.2 (Org mode 9.6)}, 
 pdflang={English}}
\begin{document}

\maketitle
\tableofcontents


\section{Preface}
\label{sec:orgf105c04}
A combination of various notes \cite{PillayNoteStability} \cite{ChernNoteStability}
\section{Preliminaries}
\label{sec:org61bf49a}
\subsection{Imaginaries and}
\label{sec:org78b8410}
The first motivation to develop \(T^{\eq}\) is dealing with quotient objects, without leaving
the context of first order logic. That is, if \(E\) is some definable equivalence relation on
some definable set \(X\), we want to view \(X/E\) as a definable set

We work in the setting of multi-sorted languages. Let \(L\) be a 1-sorted language and let \(T\)
be a (complete) \(L\)-theory. We shall build a many-sorted
language \(L^{\eq}\)-theory \(T^{\eq}\). We will ensure that in natural sense, \(L^{\eq}\)
contains \(L\) and \(T^{\eq}\) contains \(T\)

First we define \(L^{\eq}\). Consider the set \(L\)-formula \(\varphi(x,y)\), up to equivalence, such
that \(T\) models that \(\varphi\) is an equivalence relation. For each \(\varphi\), define \(s_\varphi\) to be a new sort
in \(L^{\eq}\). Of particular importance is \(s_=\), the sort given by the formula ``\(x=y\)''.
This sort \(s_=\) will yield, in each model of \(T^{\eq}\), a model of \(T\)

Also define \(f_\varphi\) to be a function symbol with domain sort \(s^n_=\) (where \(\varphi\) has \(n\) free
variables) and codomain sort \(s_\varphi\)

For each \(m\)-place relation symbol \(R\in L\), make \(R^{\eq}\) an \(m\)-place relation symbol
in \(L^{\eq}\) on \(s_=^m\). Likewise for all constant and function symbols in \(L\). Finally, for
the sake of formality, we put a unique equality symbol \(=_\varphi\) on each sort

\begin{remark}
Let \(N\) be an \(L^{\eq}\) structure. Then \(N\) has interpretations \(s_\varphi(N)\) of each
sort \(s_\varphi\) and \(f_\varphi(N):s_=(N)^{n_{f_\varphi}}\to s_\varphi(N)\) of each function symbol \(f_\varphi\)
\end{remark}

\begin{definition}[]
\(T^{\eq}\) is the \(L^{\eq}\)-theory which is axiomatised by the following
\begin{enumerate}
\item \(T\), where the quantifiers in the formulas of \(T\) now range over the sort \(s_=\)
\item For each suitable \(L\)-formula \(\varphi(x,y)\), the axiom \(\forall_{s_=}x\forall_{s_=}y(\varphi(x,y)\leftrightarrow f_\varphi(x)=f_\varphi(y))\)
\item For each \(L\)-formula \(\varphi\), the axiom \(\forall_{s_\varphi}y\exists_{s_=}x(f_\varphi(x)=y)\)
\end{enumerate}
\end{definition}

Axioms 2 and 3 simply state that \(f_\varphi\) is the quotient function for the equivalence relation
given by \(\varphi\)

\begin{definition}[]
Let \(M\vDash T\). Then \(M^{\eq}\) is the \(L^{\eq}\) structure s.t. \(s_=(M^{\eq})=M\) and for each
suitable \(L\)-formula \(\varphi(x,y)\) of \(n\) variables, the sort \(s_\varphi(M^{\eq})\) is equal
to \(M^{n_{f_\varphi}}/E\) where \(E\) is the equivalence relation defined by \(\varphi(x,y)\) and \(f_\varphi(M^{\eq})(b)=b/E\)
\end{definition}

Now \(M^{\eq}\vDash T^{\eq}\). Moreover, passing from \(T\) to \(T^{\eq}\) is a canonical operation,
in the following sense
\begin{lemma}[]
\begin{enumerate}
\item For any \(N\vDash T^{\eq}\), there is an \(M\vDash T\) s.t. \(N\cong M^{\eq}\)
\item Suppose \(M,N\vDash T\) are isomorphic, and let \(h:M\cong N\). Then \(h\) extends uniquely
to \(h^{\eq}:M^{\eq}\cong N^{\eq}\)
\item \(T^{\eq}\) is a complete \(L^{\eq}\)-theory
\item Suppose \(M,N\vDash T\) and let \(a\in M\), \(b\in N\) with \(\tp_M(a)=\tp_N(b)\). Then \(\tp_{M^{\eq}}(a)=\tp_{N^{\eq}}(b)\)
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\item Take \(M=s_=(N)\)
\item Let \(h^{\eq}:M^{\eq}\to N^{\eq}\) be defined
as \(h^{\eq}(f_\varphi(M^{\eq})(b))=f_\varphi(N^{\eq})(h(b))\) for each \(\varphi\in L\). This defines a function
on \(M^{\eq}\), because \(f_\varphi(M^{\eq})\) is surjective by the \(T^{\eq}\) axioms.
Moreover \(h^{\eq}\) is well-defined. Suppose \(f_\varphi(M^{\eq})(b)=f_\varphi(M^{\eq})(b')\),
then \(\varphi(b,b')\) and hence \(\varphi(h(b),h(b'))\),
therefore \(f_\varphi(N^{\eq})(h(b))=f_\varphi(N^{\eq})(h(b'))\). Injectivity is the same
since \(\varphi(b,b')\leftrightarrow\varphi(h(b),h(b'))\).
\item Let \(M,N\vDash T^{\eq}\), we want to show that they are elementary equivalent. Assume the
generalized continuum hypothesis. By GCH, there are \(M',N'\vDash T^{\eq}\) which are \(\lambda\) saturated
of size \(\lambda\), for some large \(\lambda\) (strongly inaccessible), which \(M\preceq M'\) and \(N\preceq N'\). Since we
want to show elementary equivalence, we can replace \(M,N\) with \(M'\) and \(N'\). By 1, we
have \(M=M_0^{\eq}\), \(N=N_0^{\eq}\) for some \(M_0,N_0\vDash T^{\eq}\). Furthermore, \(M_0,N_0\)
are \(\lambda\)-saturated of size \(\lambda\). By assumption, \(T\) is complete, so \(M_0\equiv N_0\), and
therefore \(M_0\cong N_0\). By 2, \(M\cong N\), and therefore \(M\equiv N\)

We could simply prove that there is a back and forth system between \(M\) and \(N\), using
such a system between \(M\supset M_0\vDash T\) and \(N\supset N_0\vDash T\)
\label{Problem13}
\item Let \(M,N\vDash T\), they are elementary submodels of \(\fC\). Since \(\tp_M(a)=\tp_N(b)\), there
exists an \(\sigma\in\Aut(\fC/A)\) with \(\sigma(a)=b\). By 2, this automorphism extends to \(\sigma^{\eq}:\fC\to\fC\)
with \(\sigma^{\eq}(a)=b\), hence \(\tp_{M^{\eq}}(a)=\tp_{\fC^{\eq}}(a)=\tp_{\fC^{\eq}}(b)=\tp_{N^{\eq}}(b)\)
\end{enumerate}
\end{proof}

\begin{corollary}[]
Consider the Strong space \(S_{(s_=)^n}(T^{\eq})\). The forgetful
map \(\pi:S_{(s_=)^n}(T^{\eq})\to S_n(T)\) is a homeomorphism
\end{corollary}

\begin{proof}
Observe that it is continuous and surjective. By 4 of the previous lemma it is injective. Any
continuous bijection from a compact space to a Hausdorff space is a homeomorphism
\end{proof}

\begin{proposition}[]
Let \(\varphi(x_1,\dots,x_k)\) be an \(L^{\eq}\) formula, where \(x_i\) is of sort \(S_{E_i}\). There is
an \(L\)-formula \(\psi(\bary_1,\dots,\bary_k)\) s.t.
\begin{equation*}
T^{\eq}\vDash\forall \bary_1,\dots,\bary_k(\psi(\bary_1,\dots,\bary_k)\leftrightarrow\varphi(f_{E_1}(\bary_1),\dots,f_{E_k}(\bary_k)))
\end{equation*}
\end{proposition}

\begin{proof}
Let \(n\) be the length of \(\bary_1,\dots,\bary_k\). Consider the
set \(\pi(\varphi(f_{E_1}(\bary_1),\dots,f_{E_k}(\bary_k)))\), it is a clopen subset of \(S_n(T)\) by the
previous lemma, hence equal to \(\psi(\bary_1,\dots,\bary_k)\) for some formula \(\psi\).

For any \(\varphi(f_{E_1}(\bary_1),\dots,f_{E_k}(\bary_k))\in p(\bary_1,\dots,\bary_k)\in S_{(s_=)^n}(L^{\eq})\),

If \(T^{\eq}\vDash\psi(\bary_1,\dots,\bary_k)\)
\wu{
need further consideration for homeomorphism between two space
}
\end{proof}

\begin{corollary}[]
\begin{enumerate}
\item Let \(M,N\vDash T\), and let \(h:M\to N\) be an elementary embedding.
Then \(h^{\eq}:M^{\eq}\to N^{\eq}\) is also an elementary embedding
\item \(\fC^{\eq}\) is also \(\kappa\)-saturated
\end{enumerate}
\end{corollary}

\begin{remark}
For \(M\vDash T\), a definable set \(X\subseteq M^n\) can be viewed as an element of \(M^{\eq}\).
Suppose \(X\) is defined in \(M\) by \(\varphi(\barx,\bara)\) where \(\bara\in M\). Consider the
equivalence relation \(E_\psi\) defined
by \(\psi(\bary_1,\bary_2)=\forall\barx(\varphi(\barx,\bary_1)\leftrightarrow\varphi(\barx,\bary_2))\), and
consider \(c=\bara/E_\psi=f_\psi(\bara)\in M^{\eq}\). Then \(X\) is defined in \(M^{\eq}\)
by \(\chi(\barx,c)=\exists\bary(\varphi(\barx,\bary)\wedge f_\psi(\bary)=c)\). Moreover, if \(c'\in S_\psi(M^{\eq})\)
and \(\forall\barx(\chi(\barx,c)\leftrightarrow\chi(\barx,c'))\), then \(c=c'\). To see this, let \(c'=f_{\psi}(\bara')\),
and let \(X'\) be defined in \(M\) by \(\varphi(\barx,\bara')\). Then \(X'\) is defined in \(M^{\eq}\)
by \(\chi(\barx,c')\), so we have that \(X=X'\) (in \(M^{\eq}\)). And then \(X=X'\) (in \(M\))
so \(c=f_{\psi}(\bara)=f_{\psi'}(\bara')=c'\)
\end{remark}

\begin{definition}[]
With the above considerations in mind, given \(M\vDash T\) and a definable set \(X\subseteq M^n\), we call
such a \(c\in M^{\eq}\) a \textbf{code} for \(X\)
\end{definition}

\begin{remark}
Any automorphism of \(\fC^{\eq}\) fixes a definable set \(X\) set-wise iff it fixes a code
for \(X\). However, the choice of a code for \(X\) will depend on the formula \(\varphi\) used to define
it
\begin{align*}
\sigma(X)=X&\Leftrightarrow\sigma(X)=\{\sigma(x):\varphi(x,b)\}=\{x:\varphi(x,\sigma(b))\}=\{x:\varphi(x,b)\}=X\\
&\Leftrightarrow\forall x(\varphi(x,b)\leftrightarrow\varphi(x,\sigma(b)))\\
&\Leftrightarrow\psi(b,\sigma(b))\Leftrightarrow f_\psi(b)=f_\psi(\sigma(b))
\end{align*}

We can think of \(\fC^{\eq}\) as adjoining codes for all definable equivalence relations
(as \(c/E'\) codes \(E'(x,c)\) for an arbitrary equivalence relation \(E\))
\end{remark}

\begin{definition}[]
Let \(A\subseteq M\vDash T\). Then \(\acl^{\eq}(A)=\{c\in M^{\eq}:c\in\acl_{M^{\eq}}(A)\}\) and \(\dcl^{\eq}(A)\)
is defined similarly
\end{definition}

\begin{remark}
Suppose \(A\subseteq M\prec N\), then \(\acl_{N^{\eq}}(A),\dcl_{N^{\eq}}(A)\subseteq M^{\eq}\), so this notation is unambiguous
\end{remark}

\begin{lemma}[]
\label{P2.35}
Let \(M\vDash T\), a definable subset \(X\) of \(M^n\), and \(A\subseteq M\). Then \(X\) is
almost \(A\)-definable iff \(X\) is definable in \(M^{\eq}\) by a formula with parameters in \(\acl^{\eq}(A)\)
\end{lemma}

\begin{proof}
We can work in \(\fC\), since \(M\prec\fC\). Let \(c\) be a code for \(X\). From \ref{P2.13} \(X\) is
almost \(A\)-definable iff \(\abs{\{\sigma(X):\sigma\in\Aut(\fC/A)\}}<\omega\) iff \(\abs{\{\sigma(c):\sigma\in\Aut(\fC/A)\}}<\omega\)
(note that \(\sigma\) extends uniquely in \(\fC^{\eq}\)),
that is, \(c\in\acl^{\eq}(A)\)

\begin{align*}
\sigma(b)/E=\sigma'(b)/E&\Leftrightarrow\forall x(\varphi(x,\sigma(b))\leftrightarrow\varphi(x,\sigma'(b)))\\
&\Leftrightarrow\sigma(X)=\sigma'(X)
\end{align*}
\end{proof}

\begin{definition}[]
Let \(\bara,\barb\in\fC\) have length \(n\). Let \(\bara,\barb\) have the same strong type
over \(A\) (written as \(\stp_{\fC}(\bara/A)=\stp_{\fC}(\bara/A)\)) if \(E(\bara,\barb)\) for any
finite equivalence relation (finitely many classes) defined over \(A\)
\end{definition}

\begin{remark}
If \(\varphi(\barx)\) is a formula over \(A\), then it defines an equivalence with two
classes \(E(\barx_1,\barx_2)\) iff \((\varphi(\barx_1)\wedge\varphi(\barx_2))\vee(\neg\varphi(\barx_1)\wedge\neg\varphi(\barx_2))\). Hence strong
types are a refinement of types

Hence for any formula if \(\stp(\bara/A)=\stp(\barb/B)\), at least we have \(\varphi(\bara)\leftrightarrow\varphi(\barb)\)
\end{remark}

\begin{lemma}[]
If \(A=M\prec\fC\), then \(\tp_{\fC}(a/M)\vDash\stp_{\fC}(a/M)\)
\end{lemma}

\begin{proof}
Let \(E\) be an equivalence relation with finitely many classes, defined over \(M\),
and \(\barb\) another realization of \(\tp_{\fC}(\bara/M)\), we want to show \(E(a,b)\).
Since \(E\) has only finitely many classes, and \(M\) is a model, there are
representants \(e_1,\dots,e_n\) of each \(E\)-class in \(M\). Hence we must have \(E(a,e_i)\) for
some \(i\), and therefore \(E(b,e_i)\), which yields \(E(a,b)\)
\end{proof}

\begin{lemma}[]
Let \(A\subseteq M\vDash T\), and let \(\bara,\barb\in M\). TFAE
\begin{enumerate}
\item \(\stp(\bara/A)=\stp(\barb/A)\)
\item \(\bara,\barb\) satisfy the same formulas almost \(A\)-definable
\item \(\tp_{\fC}(\bara/\acl^{\eq}(A))=\tp_{\fC}(\barb/\acl^{\eq}(A))\)
\end{enumerate}
\end{lemma}

\begin{proof}
\(3\to 2\). \ref{P2.35}. Suppose \(X=\varphi(\fC,\bard)\) is almost \(A\)-definable,
then \(\bara,\barb\in\varphi(\fC,\bard)\) iff \(\bara,\barb\in\theta(\fC):=\exists\bary(\varphi(\fC,\bary)\wedge\bary/E_\psi=\barc)\)
where \(\barc=\bard/E_\psi\in\acl^{\eq}(A)\).

\(2\to 3\). For any \(\varphi(\barx,\bard)\in\tp_{\fC}(\bara/\acl^{\eq}(A))\)
\end{proof}

\section{Index}
\label{sec:orgcf64225}

This is a functional link that will open a buffer of clickable index entries:

\renewcommand{\indexname}{}
\printindex

\section{References}
\label{sec:orgbd17597}

\label{bibliographystyle link}
\bibliographystyle{unsrtnat}

\label{bibliography link}
\bibliography{../references}
\end{document}
