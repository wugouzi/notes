% Created 2022-04-07 Thu 16:19
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\graphicspath{{../../books/}}
\input{../preamble.tex}
\makeindex
\usepackage[UTF8]{ctex}
\def \FORM {\text{FORM}}
\def \PROOF {\text{PROOF}}
\author{Yao}
\date{\today}
\title{Set Theory2}
\hypersetup{
 pdfauthor={Yao},
 pdftitle={Set Theory2},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 28.0.92 (Org mode 9.6)}, 
 pdflang={English}}
\begin{document}

\maketitle
\tableofcontents

\section{集合的宇宙}
\label{sec:org1e347d7}
\subsection{数理逻辑}
\label{sec:orgb3960d9}
在\(\ZFC\)下证明\(\ZFC\vdash\CH\)，希望将``\(\ZFC\vdash\CH\)''表述为一阶句子

一般而言，给定一个\(\call\)-理论\(T\)和一个\(\call\)-句子\(\delta\)，``\(T\vdash\sigma\)''不能用一个\(\call\)-句子表示，只能
用元语言表述

我们需要在\(\ZFC\)中编码“元语言”

在\(\ZFC\)中可以定义\(\caln=(\N,+,\times,0,1)\)

即存在集合论语言\(\call=\{\in\}\)中的 \textbf{公式} ，在\(\ZFC\)的任意模型中可以定义 \(\N,+,\times,0,1\)，以上公式与模
型无关

用\(\ucorner{0}\)，\(\ucorner{1}\)，\(\ucorner{2}\)\ldots{} 表示\(\ZFC\)中的“自然数”，以区别元语言中
的自然数

\begin{theorem}[]
如果\(R\subseteq\N^n\)是一个递归关系。\(T\subseteq\Th(\caln)\)是包含数论的适当丰富的理论，则存在公式\(\varphi(x_1,\dots,x_n)\)使
得对任意自然数\(m_1,\dots,m_n\)有
\begin{align*}
&\text{如果}(m_1,\dots,m_n)\in R\text{则}T\vdash\varphi(\ucorner{m_1},\dots,\ucorner{m_n})\\
&\text{如果}(m_1,\dots,m_n)\notin R\text{则}T\vdash\neg\varphi(\ucorner{m_1},\dots,\ucorner{m_n})
\end{align*}
\end{theorem}

\begin{remark}
\begin{enumerate}
\item \(T\subseteq\Th(\caln)\subseteq\ZFC\)
\item \(\varphi\)是语言\(\{+,\times,0,1\}\)上的公式
\item \(\varphi\)可以还原为一个\(\{\in\}\)上的公式
\item \(\varphi(\ucorner{m_1},\dots,\ucorner{m_n})\)是一个闭语句
\end{enumerate}
\end{remark}

\textbf{编码}

编码函数\(f:X\to\N\)

存在解码函数\(g,h\)，对\(a=a_0,\dots,a_n\in X\), \(h(f(a))=n+1\), \(g(f(a),k)=a_k\) (分量)

性质：以上三种函数\(f,g,h\)均是递归函数\(\Rightarrow\)都是可表示的

性质：“公式集”的编码集是递归的

性质：如果\(T\subseteq\ZFC\)是可公理化的，则\(T\)的证明集的编码集是递归的

\begin{corollary}[]
存在一个公式 \(\psi\) 和\(\theta\)使得
\begin{align*}
\ZFC\vdash\psi(n)&\Leftrightarrow n\text{ is a formula}\\
\ZFC\vdash\neg\psi(n)&\Leftrightarrow n\text{ is not a formula}\\
\ZFC\vdash\theta(n)&\Leftrightarrow n\text{ is a proof in }\ZFC\\
\ZFC\vdash\neg\theta(n)&\Leftrightarrow n\text{ is not a proof in }\ZFC\\
\end{align*}
称\(\psi\)定义了公式集，\(\theta\)定义了证明集
\end{corollary}

\(\FORM=\{\ucorner{\varphi}\mid\varphi\text{ formula}\}\subseteq\N\)

    如果\(T\subseteq\ZFC\)是可公理化的，则“\(T\)是一致的”是一个一阶表述式
    “不存在一个有穷的证明序列\(D=(\varphi_1,\dots,\varphi_n)\)使得\(\varphi_n\)形如\(\varphi\wedge\neg\varphi\)
，记作\(\Con(T)\)

\begin{theorem}[第二不完全]
如果\(T\)是包含\(\ZFC\)的一个递归公理集，且\(T\)一致，则
\begin{equation*}
T\not\vdash\Con(T)
\end{equation*}
特别地，\(\ZFC\not\vdash\Con(\ZFC)\)
\end{theorem}

\begin{theorem}[]
对任意可公理化的理论\(T\)，\(\ZFC\vdash\Con(T)\)当且仅当存在\(M\vDash T\)
\end{theorem}

即不能在\(\ZFC\)里证明\(\ZFC\)有一个模型

需要可公理化来写出\(\Con(T)\)，因此因为\(\ZFC\not\vDash\Con(T)\)，我们只能假设这么一个模型

集合论的模型跟集合论没什么关系，就是一个集合带一个二元关系，是关于集合论语言的结构

\begin{definition}[]
设\((M,E)\)是集合论模型
\begin{enumerate}
\item 对任意公式\(\varphi(\barx,y)\)，定义\(M^n\)上的函数
\begin{equation*}
h_\varphi:M^n\to M
\end{equation*}
满足条件
\begin{equation*}
M\vDash\exists y\varphi(\bara,y)\Rightarrow M\vDash\varphi(\bara,h_\varphi(\bara))
\end{equation*}
称\(h_\varphi\)为\(\varphi\)的Skolem函数（依赖于选择公理，不同的变量选择有不同的函数）
\item 令\(\calh=\{h_\varphi\mid\varphi\text{ formula}\}\)为Skolem函数集合，设\(S\)是\(M\)的任意子集，则\(\calh(S)\)表示包
含\(S\)且对\(\calh\)封闭的最小集合，称之为\(S\)的Skolem壳
\end{enumerate}
\end{definition}

\begin{lemma}[]
令\(N\)是集合论模型，\(S\subseteq N\)，如果\(M=\calh(S)\)，则\(M\prec N\)
\end{lemma}

\begin{proof}
Induction

对任意\(\bara\in M^n\)，有\(M\vDash\varphi(\bara)\Leftrightarrow N\vDash\varphi(\bara)\)
\begin{enumerate}
\item 不含量词，显然成立
\item \(\varphi\)形如\(\exists y\psi(\barx,y)\), \(N\vDash\exists y\psi(\bara,y)\Rightarrow N\vDash\psi(\bara,h_\psi(\bara))\)，by
IH, \(M\vDash\psi(\bara,h_\psi(\bara))\Rightarrow M\vDash\exists y\psi(\bara,y)\)
\end{enumerate}
\end{proof}

\begin{theorem}[Löwenheim–Skolem Theorem]

\end{theorem}
\subsection{层垒的谱系}
\label{sec:org778383a}
工作于\(\ZF^-\)：\(\ZF-\)基础公理

\(\alpha\mapsto V_\alpha\)是\(\On\)到\(\WF\)的1-1映射，而\(\On\)是真类

\begin{lemma}[]
For any ordinal \(\alpha\)
\begin{enumerate}
\item \(V_\alpha\) is transitive
\item \(\xi\le\alpha\Rightarrow V_\xi\subseteq V_\alpha\)
\item if \(\kappa\) is inaccessible, then \(\abs{V_\kappa}=\kappa\)
\end{enumerate}
\end{lemma}

\begin{definition}[]
For any \(x\in\WF\), \textbf{rank} of \(x\) is
\begin{equation*}
\rank(x)=\min\{\beta\mid x\in V_{\beta+1}\}
\end{equation*}
\end{definition}

\(\rank(x)=\alpha\Rightarrow x\in V_{\alpha+1}\wedge x\notin V_\alpha\)

\begin{itemize}
\item \(x\in V_{\alpha+1}\Leftrightarrow\rank(x)\le\alpha\)
\item \(x\subseteq V_\alpha\Leftrightarrow\rank(x)\le\alpha\)
\end{itemize}

\begin{lemma}[]
\begin{enumerate}
\item \(V_\alpha=\{x\in\WF\mid\rank(x)<\alpha\}\)
\item \(\WF\) is transitive
\item \(\forall x,y\in\WF\), \(x\in y\Rightarrow\rank(x)<\rank(y)\)
\item \(\forall y\in\WF\), \(\rank(y)=\sup\{\rank(x)+1\mid x\in y\}\)
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\item by definition, \(x\in V_{\rank(x)+1}\setminus V_{\rank(x)}\), \(\rank(x)<\alpha\Rightarrow x\in V_{\rank(x)+1}\subseteq V_\alpha\)

\(\rank(x)\ge\alpha\Rightarrow x\notin V_\alpha\)

\item \(\WF\) is the ``union'' of transitive sets

\item \(y\in V_{\rank(y)+1}\setminus V_{\rank(y)}\), \(y\subseteq V_{\rank(y)}\), \(x\in y\Rightarrow x\in V_{\rank(y)}\Rightarrow\rank(x)<\rank(y)\)

\item by 3, \(\sup\{\rank(x)+1\mid x\in y\}\le\rank(y)\).

induction on \(\rank(y)\le\sup\{\rank(x)+1\mid x\in y\}\)
\begin{itemize}
\item \(\rank(y)=0\)
\item \(\rank(y)=\beta+1\), \(y\in V_{\beta+2}\setminus V_{\beta+1}\)

\(y\in V_{\beta+2}\Rightarrow y\subseteq V_{\beta+1}\). \(y\notin V_{\beta+1}\Rightarrow y\not\subseteq V_{\beta}\Rightarrow y\setminus V_\beta\) nonempty.
Let \(x\in y\setminus V_\beta\), \(\rank(x)\ge\beta\), \(\sup\{\rank(x)+1\mid x\in y\}\ge\beta+1=\rank(y)\)
\item \(\rank(y)=\gamma\) for some limit, then \(y\subseteq V_\gamma\) and for any \(\xi<\gamma\), \(y\not\subseteq V_\xi\),
let \(X_\xi\in y\setminus V_\xi\), then \(\rank(X_\xi)\ge\xi\), \(\sup\{\rank(x)+1\mid x\in y\}\ge\sup\{\xi+1\mid\xi<\rank(y)\}\ge\rank(y)\)
\end{itemize}
\end{enumerate}
\end{proof}

\begin{itemize}
\item \(\WF\)中的集合按照秩分层
\item 在\(\WF\)中基础公理是成立的：\(\forall y(y\neq\emptyset\to\exists x\in y(x\cap y=\emptyset))\)，因为任何序数集都有最小元，挑一个有最
小rank的就好了
\item \(\WF\)类的构造没有用到选择公理
\item \(\On\subseteq\WF\)
\end{itemize}


\begin{lemma}[]
for any ordinal \(\alpha\)
\begin{enumerate}
\item \(\alpha\in\WF\) and \(\rank(\alpha)=\alpha\)
\item \(V_\alpha\cap\On=\alpha\)
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\item \(0\in V_1\setminus V_0\subset\WF\), \(\rank(0)=0\)

If \(\alpha\in\WF\)
and
\(\rank(\alpha)=\alpha\).
\(\alpha\in V_{\alpha+1}\setminus V_\alpha\), \(\alpha\subseteq V_{\alpha+1}\). \(\alpha+1=\alpha\cup\{\alpha\}\subseteq V_{\alpha+1}\), \(\alpha+1\in V_{\alpha+2}\subset\WF\).
If \(\alpha+1\in V_{\alpha+1}\), then \(\rank(\alpha+1)\le\alpha\), but \(\alpha\in\alpha+1\Rightarrow\rank(\alpha)=\alpha<\rank(\alpha+1)\). A
contradiction

suppose \(\gamma\) is a limit ordinal and for any \(\alpha<\gamma\), \(\alpha\in V_{\alpha+1}\setminus V_\alpha\).
\(\gamma=\bigcup_{\alpha<\gamma}\alpha\subseteq\bigcup_{\alpha<\gamma}V_\alpha=V_\gamma\). Thus \(\gamma\in V_{\gamma+1}\), \(\rank(\gamma)\le\gamma\) and \(\rank(\gamma)\not<\gamma\).
\item suppose \(\beta\in V_\alpha\cap\On\), then \(\beta=\rank(\beta)<\alpha\). If \(\beta\in\alpha\) and \(\rank(\beta)<\alpha\), \(\beta\in V_\alpha\cap\On\)
\end{enumerate}
\end{proof}

\begin{lemma}[]
\begin{enumerate}
\item If \(x\in\WF\), then \(\bigcup x,\calp(x),\{x\}\in\WF\), and their rank \(<\rank(x)+\omega\)
\item If \(x,y\in\WF\), then \(x\times y,x\cup y,x\cap y,\{x,y\},(x,y),x^y\in\WF\), and their
rank \(<\rank(x)+\rank(y)+\omega\)
\item \(\Z,\Q,\R\in V_{\omega+\omega}\)
\item for any set \(x\), \(x\in\WF\Leftrightarrow x\subset\WF\)
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\item suppose \(\rank(x)=\alpha\). \(x\in V_{\alpha+1}\setminus V_\alpha\) and \(x\subseteq V_\alpha\).

by transitivity, \(\bigcup x\subseteq V_\alpha\Rightarrow \bigcup x\in V_{\alpha+1}\subset\WF\). \(\rank(\bigcup x)\le\alpha\)

suppose
\(y\in\calp(x)\),
\(y\subseteq x\Rightarrow y\subseteq V_\alpha\Rightarrow y\in V_{\alpha+1}\). \(\calp(x)\subseteq V_{\alpha+1}\), \(\calp(x)\in V_{\alpha+2}\), \(\rank(\calp(x))\le\alpha+1\).

\(\{x\}\in\calp(x)\in V_{\alpha+2}\).

\item Suppose \(\rank(x)=\alpha,\rank(y)=\beta\), \(x\subset V_\alpha\), \(y\subset V_\beta\)

\(x\cup y\subset V_\alpha\cup V_\beta=V_{\max(\alpha,\beta)}\), \(\rank(x\cup y)\le\max(\alpha,\beta)\)

\(x\cap y\subset V_{\min(\alpha,\beta)}\)

\(\{x,y\}\subseteq V_{\alpha+1}\cup V_{\beta+1}=V_{\max(\alpha,\beta)+1}\), \(\rank(\{x,y\})=\max(\alpha,\beta)+1\)

\((x,y)=\{\{x\},\{x,y\}\}\subset V_{\max(\alpha,\beta)+2}\). \(\rank((x,y))=\max(\alpha,\beta)+2\)

\(x\times y=\{(a,b)\mid a\in x,b\in y\}\).
\(a\in x\Rightarrow\rank(a)<\alpha\), \(b\in y\Rightarrow\rank(b)<\beta\), \(\rank(a,b)<\max(\alpha,\beta)+2\),
\((a,b)\in V_{\max(\alpha,\beta)+2}\). \(x\times y\subseteq V_{\max(\alpha,\beta)+2}\), \(\rank(x\times y)\le\max(\alpha,\beta)+2\).

\(x^y\subseteq\calp(x\times y)\subseteq V_{\max(\alpha,\beta)+3}\).

\item \(\N=\omega\in V_{\omega+1}\)

\(\Z\): let \(\sim\) be an equivalence relation on \(\omega\times\omega\), \((a,b)\sim(c,d)\Leftrightarrow a+d=b+c\),
then \(\Z=(\omega\times\omega)/\sim\). Hence \(\Z\) is a partition of \(\omega\times\omega\) and
hence \(\Z\subseteq\calp(\omega\times\omega)\). \(\Z\in V_{\omega+3}\)

\(\Q\): let \(\sim\) be an equivalence
on \(\Z\times\Z^+\), \((a,b)\sim(c,d)\Leftrightarrow ad=bc\). \(\Q\subseteq\calp(\Z\times\Z^+)\), \(\Q\in V_{\omega+6}\)

\(\R\): set of dedekind cut on \(\Q\), \(\R\subset\calp(\Q)\), \(\R\in V_{\omega+8}\)

\item \(\Rightarrow\): \(\WF\) is transitive

\(\Leftarrow\): \(x\) is a set and \(x\subset\bigcup_{\alpha\in\On}V_\alpha\).

\textbf{Claim}: there is an ordinal \(\alpha\) s.t. \(x\subset V_\alpha\)

Otherwise, let \(f:\On\to\calp(x)\) s.t. \(f(\alpha)=x\setminus V_\alpha\). Then for any \(y\in\calp(x)\), \(f^{-1}(y)\) is
a set. \(\On=\bigcup_{y\in x}f^{-1}(y)\) and is thus a set, a contradiction
\end{enumerate}
\end{proof}

AC => Any set has cardinality
\begin{lemma}[]
Assume AC (\(V\vDash\ZFC\))
\begin{enumerate}
\item for any group \(G\), there is a group \(G'\) in \(\WF\) s.t. \(G\cong G'\)
\item for any topological space \(T\), there is a topological space \(T'\) in \(\WF\)
s.t. \(T\cong T'\) (homeomorphic)
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\item suppose \((G,*_G)\) is a group, \(G,*_G\in V\). By AC, there is a cardinal \(\alpha\)
s.t. \(\abs{G}=\alpha\), that is, there is a bijection \(f:\alpha\to G\). Define \(*\): for
any \(x,y,z\in\alpha\), \(x*y=z\Leftrightarrow f(x)*_Gf(y)=f(z)\). Then \((\alpha,​*)\cong(G,​*_G)\), \(​*\subseteq\alpha\times\alpha\)
\end{enumerate}
\end{proof}

\(V\)中的任何结构都可以在\(\WF\)中找到同构象（同构是在\(V\)里看到的）

\begin{definition}[]
任意集合\(A\)上的二元关系<是 \textbf{良基} 的，当且仅当对\(A\)的任意非空子集\(X\)，\(X\)有<下的极小元
\end{definition}

\begin{theorem}[]
If \(A\in\WF\), then \(\in\) is a well-founded relation on \(A\)
\end{theorem}

\begin{proof}
suppose \(X\subseteq A\), \(X\neq\emptyset\), \(X\subseteq\WF\), then elements of \(X\) has ranks
and \(x\in y\Rightarrow\rank(x)<\rank(y)\). Let \(x\) having least rank in \(X\), then \(x\) is
the \(\in\)-minimal element in \(X\)
\end{proof}

\begin{lemma}[]
If \(A\) is a transitive set and \(\in\) is a well-founded relation on \(A\), then \(A\in\WF\)
\end{lemma}

\begin{proof}
Just need to prove \(A\subset\WF\). If \(A\not\subset\WF\), \(X=A\setminus\WF\neq\emptyset\). Then \(X\) has a \(\in\)-minimal
element \(x\). Then \(x\neq\emptyset\in\WF\). For any \(y\in x\), \(y\in A\). By the minimality
of \(x\), \(y\in\WF\). Then \(x\subset\WF\), \(x\in\WF\), a contradiction
\end{proof}

\begin{lemma}[]
For any set \(x\), there is a minimal transitive set \(\trcl(x)\) s.t. \(x\subseteq\trcl(x)\)
\end{lemma}

\begin{proof}
For any \(n\in\omega\) define \(x_n\)
\begin{align*}
x_0&=x\\
x_{n+1}&=\bigcup x_n
\end{align*}
let \(\trcl(x)=\bigcup_{n\in\omega}x_n\).
\begin{enumerate}
\item \(\trcl(x)\)is transitive

\(a\in\trcl(x)\Rightarrow a\in x_n\Rightarrow a\subseteq x_{n+1}\subseteq\trcl(x)\)
\item \(\trcl(x)\) is minimal

If \(y\supseteq x\) is transitive, recursively prove for any \(n<\omega\), \(x_n\subseteq y\).
\end{enumerate}
\end{proof}

\(\trcl(x)\) is the \textbf{transitive closure} of \(x\).

\begin{lemma}[]
We can prove the following without axiom of power set
\begin{enumerate}
\item if \(x\) is transitive, \(\trcl(x)=x\)
\item \(y\in x\Rightarrow\trcl(y)\subseteq\trcl(x)\)
\item \(\trcl(x)=x\cup\bigcup\{\trcl(y)\mid y\in x\}\)
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\setcounter{enumi}{1}
\item \(y\in x\subset\trcl(x)\). \(y\in\trcl(x)\). \(\trcl(y)\subseteq\trcl(x)\).
\item \(x\cup\bigcup\{\trcl(y)\mid y\in x\}\subseteq\trcl(x)\) by (2)

\(\bigcup\{\trcl(y)\mid y\in x\}\) is transitive. For \(y\in x\), \(y\subseteq\trcl(y)\). Thus rhs is transitive
\end{enumerate}
\end{proof}


\begin{theorem}[In \(\ZFm\)]
For any set \(X\), TFAE
\begin{enumerate}
\item \(X\in\WF\)
\item \(\trcl(X)\in\WF\)
\item \(\in\) is a well-founded relation on \(\trcl(X)\)
\end{enumerate}
\end{theorem}

\begin{proof}
\(1\to 2\): \(\WF\) is closed under union
\end{proof}

\begin{theorem}[]
If \(V\vDash\ZFm\), TFAE
\begin{enumerate}
\item axiom of foundation (\(V\vDash\)) axiom of foundation
\item for any set \(X\), \(\in\) is a well-founded relation on \(X\)
\item \(V=\WF\)
\end{enumerate}
\end{theorem}

\(V\vDash\ZF\Rightarrow V=\WF(\WF\vDash\ZF)\)

Goal:  \(V\vDash\ZFm\Rightarrow\WF\vDash\ZFm\)
但是\(\WF\)是一个类，我们并没有定义

我们可以用相对化编码\(\WF\vDash\ZFm\)
\subsection{相对化 relativization}
\label{sec:org476818e}
工作在\(\ZFm\)
\begin{definition}[]
\(M\) class, \(\varphi\) formula, \(\varphi\)对\(M\)的 \textbf{相对化} \(\varphi^{M}\)
\begin{enumerate}
\item \((x=y)^{M}:=x=y\)
\item \((x\in y)^{M}:=x\in y\)
\item \((\varphi\to\psi)^{M}:=\varphi^{M}\to\psi^{M}\)
\item \((\neg\varphi)^{M}:=\neg\varphi^{M}\)
\item \((\forall x\varphi)^{M}:=(\forall x\in M)\varphi^{M}\)
\end{enumerate}
\end{definition}
\(\varphi^{M}\)读作“\(\varphi\)在\(M\)中为真”，表示为\((M,\in)\subseteq(V,\in)\)有\(M\vDash\varphi\)，即如果\(V\vDash\varphi^{M}\)，那
么\(M\vDash\varphi\)，而\(V\)知道得更多一点

重新定义了满足

若\(M\)被公式\(M(u)\)定义，\((\forall x\varphi)^{M}\)是公式\(\forall x(M(x)\to\varphi^{M}(x))\)

\begin{examplle}[]
\(M=\On\)，\(\On\vDash\forall x\forall y(x\in y\vee y\in x\vee x= y)\)
\end{examplle}

``\(M\vDash\varphi\)''可以形式化为\(V\vDash\varphi^M\)，而\(M\)对应于\(M(u)\)，即等价于\(T\vdash\varphi^M\)，如果我们工作在某个\(T\)
上

若函数\(f\)被公式\(\varphi(\barx,y)\)定义，则\(V\vDash\forall\barx\exists!y\varphi(\barx,y)\)，但相对化后不一定对，因此
\(f^M=\{(\barx,y)\in M:\varphi^M(\barx,y)\}\)不一定是\(M\)上的函数

\begin{definition}[]
for any theory \(T\), any class \(M\), \(M\) is a \textbf{model} of \(T\), \(M\vDash T\), iff for any axiom
\(\varphi\) of \(T\), \(\varphi^M\) holds, i.e., \(V\vDash\varphi^M\)
\end{definition}

\(V\)中定义出语义

\begin{theorem}[]
\(V\vDash\ZFm\Rightarrow\WF\vDash\ZF-\Inf\)，

\(V\vDash(\ZF-\Inf)^{\WF}\)
等价的
\(\ZFm\vdash(\ZF-\Inf)^{\WF}\)
\end{theorem}

\begin{itemize}
\item \textbf{存在公理} ：\(\exists x\in M(x=x)\)
\item \textbf{外延公理} ：\(\Ext^M\)
\begin{equation*}
\forall x\in M\forall y\in M\forall u\in M((u\in X\leftrightarrow u\in Y)\to X=Y)
\end{equation*}
\begin{lemma}[]
If \(M\) is transitive, then \(\Ext^M\) holds
\end{lemma}

\begin{proof}
suppose \(X,Y\in M\), if \(X\neq Y\), then there is \(u\in X\triangle Y\) (by \(\Ext\) in \(V\)), by
transitivity, \(u\in M\)
\end{proof}
\item 分离公理模式：for any \(M\), any formula \(\varphi\), \(S(\varphi)^M\)
\begin{equation*}
\forall x\in M\exists Y\in M\forall u\in M(u\in Y\leftrightarrow u\in X\wedge\varphi^M(u))
\end{equation*}
Therefore, if for any \(X\in M\), \(\{u\in X\mid\varphi^M(x)\}\in M\), then 分离公理模式在\(M\)中为真
\begin{lemma}[]
If \(M\) satisfies \(x\in M\Leftrightarrow x\subset M\), then \(S(\varphi)^M\) holds for any \(M\)
\end{lemma}

\begin{proof}
Suppose \(X\in M\), suffices to find corresponding \(Y\in M\) s.t. \(\forall u\in M(u\in Y\leftrightarrow u\in X\wedge\varphi^M(u))\)

根据\(V\)中的分离公理, \(Y=\{x\in X\mid\varphi^M(u)\}\in V\) and \(Y\subseteq X\subset M\), thus \(Y\in M\) and
\(\forall u(u\in Y\leftrightarrow u\in X\wedge\varphi^M(u))\). But \(x\in Y\Rightarrow x\in M\), thus this is equivalent to
\(\forall u\in M(u\in Y\leftrightarrow u\in X\wedge\varphi^M(u))\)
\end{proof}
\item \textbf{axiom of pairing} Pair
\begin{equation*}
\forall x\in M\forall y\in M\exists z\in M\forall u\in M(u\in z\leftrightarrow u= x\vee u=y)
\end{equation*}
只要\(M\)对对集函数\(x,y\mapsto\{x,y\}\)封闭，则\(Pair^M\)成立
\item 幂集公理 \(Pow\)
\begin{equation*}
\forall X\in M\exists Y\in M\forall u\in M(u\in Y\leftrightarrow\forall a\in M(a\in u\to a\in X))
\end{equation*}
\begin{lemma}[]
If \(M\) satisfies \(x\in M\Leftrightarrow x\subset M\), then \(Pow^M\) holds
\end{lemma}

\begin{proof}
for any \(X\in M\), \(\calp(X)\in M\). and we prove \(\calp(X)\) is the \(Y\), for any \(u\in M\)
\end{proof}
\item \textbf{axiom of infinity} \(Inf\)
\begin{equation*}
\exists X\in M(\emptyset\in X\wedge\forall y\in M(y\in X\to y^+\in X))
\end{equation*}
\(\emptyset:\psi(x):=\forall u(u\in x\to u\neq u)\), \(x=\emptyset\Leftrightarrow\psi(x)\)

\(y^+:\varphi(y,z):\forall u\in z(u=y\vee u\in y)\wedge y\subseteq z\wedge y\in z\)
函数相对化后不一定是函数，所以放到下一节
\item \textbf{axiom of foundation} Fod
\begin{equation*}
\forall x\in M(\exists u\in M(u\in x)\to\exists y\in M(y\in x\wedge\neg\exists u\in M(u\in x\wedge u\in y)))
\end{equation*}
\begin{lemma}[]
If \(M\) is transitive and elements of \(M\) is well-founded under \(\in\), then \(Fod^M\) holds
\end{lemma}

\begin{proof}
suppose \(x_0\in M\) and there is

\(\psi:=\exists u(u\in x)\) and \(\varphi\) is the latter part

\(\psi^M(x_0)\leftrightarrow\exists u(u\in x_0)\) since \(M\) is transitive, \(\varphi^M(x_0)\leftrightarrow\exists y(y\in x_0\wedge\neg\exists u\in M(u\in x\wedge u\in y))\)

在\(V\)中,\(x_0\neq\emptyset\)，由条件可知\((x_0,\in)\)是良基的，于是\(\varphi\)在\(V\)中对，那么当然在\(M\)中对
\end{proof}
\item \textbf{替换公理模式} \(Rep(\varphi)\)
\begin{equation*}
\forall A\in M\forall x\in A\cap M\exists !y\in M\varphi^M(x,y)\to\exists B\in M\forall x\in A\exists y\in B\varphi^M(x,y)
\end{equation*}
\(\exists!y\theta(y):\exists y(\theta(y)\wedge\forall y'(\theta(y')\to y=y'))\)
\begin{lemma}[]
if \(M\) satisfied \(x\in M\Leftrightarrow x\subset M\), then \(Rep(\varphi)^M\) holds for any \(\varphi\)
\end{lemma}

\begin{proof}
for any \(A_0\in M\), then \(A_0\cap M=A_0\), thus we have
\(\forall x\in A_0\exists!y(\varphi^M(x,y)\wedge M(y))\).

by \(Rep(\varphi^M(x,y)\wedge M(y))\),
\(\exists B'\forall x\in A_0\exists y\in B'\varphi^M(x,y)\wedge M(y)\)

Let \(B=B'\cap M\), which is what we want
\end{proof}

Thus in \(\ZFm\), we can prove \(\WF\vDash\ZF-\inf\)
\end{itemize}
\subsection{绝对性}
\label{sec:org7dc4890}
\((V,\in)\supseteq(M,\in)\)

对于哪些\(\varphi\)，有\(V\vDash\varphi\Leftrightarrow M\vDash\varphi\)

\begin{definition}[]
公式\(\psi(\barx)\)，对任意类\(M\subseteq N\)，如果
\begin{equation*}
\forall\barx\in M(\psi^M(\barx)\leftrightarrow\psi^N(\barx))
\end{equation*}
就称\(\psi(\barx)\)对于\(M,N\)是 \textbf{绝对的} ，如果\(N=V\)，则称\(\psi(\barx)\)对于\(M\)是 \textbf{绝对的}
\end{definition}

\(\bara\in M\), \((M,\in)\vDash\psi(\bara)\Leftrightarrow V\vDash\psi^M(\bara)\)

\(\psi\)相对于\(M,N\)绝对：\(\forall\bara\in M\),有\(M\vDash\psi(\bara)\Leftrightarrow N\vDash\psi(\bara)\)

if \(\forall\varphi(\barx)\in L\)，均有\(\varphi\)相对于\(M,N\)绝对的，则\(M\preceq N\)

\begin{lemma}[]
suppose \(M\subseteq N\), \(\varphi,\psi\) formula
\begin{enumerate}
\item 如果\(\varphi,\psi\)相对于\(M,N\)绝对， so are \(\neg\varphi,\varphi\to\psi\)
\item if \(\varphi\) is q.f., then \(\varphi\)对任意\(M\)绝对
\item if \(M\) are transitive, and \(\varphi\)相对于它们绝对， so is \(\forall x\in y\varphi\)
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\setcounter{enumi}{2}
\item \(\forall x\in y\varphi:=\forall x(x\in y\to\varphi(x,y,\barz))\)，故\((\forall x\in y\varphi)^M=\forall x\in M(x\in y\to\varphi^M(x,y,\barz))\)，任取
\(y_0,\barz_0\in M\),则由\(M\)的传递性，都有\(x\in y_0\Rightarrow x\in M\)

目标：\(\forall x\in M(x\in y_0\to\varphi^M(x,y_0,\barz_0))\)当且仅当\(\forall x\in N(x\in y_0\to\varphi^N(x,y_0,\barz_0))\)

由\(\varphi\)的绝对性，对每个\(x_0\in M\)，有
\begin{equation*}
\varphi^M(x_0,y_0,\barz_0)\leftrightarrow\varphi^N(x_0,y_0,\barz_0)
\end{equation*}
故\(V\vDash\forall x\in M(x\in y_0\to\varphi^M(x,y_0,\barz_0))\)，当且仅当
\(V\vDash\forall x(x\in y_0\to\varphi^M(x,y_0,\barz_0))\)当且仅当
\(V\vDash\forall x\in N(x\in y_0\to\varphi^M(x,y_0,\barz_0))\)
\end{enumerate}
\end{proof}

\begin{lemma}[]
令\(M\subseteq N\)且\(M\)传递，\(\psi(\barx)\)是一个公式，则
\begin{enumerate}
\item 如果\(\psi\)是\(\Delta_0\)公式，则他它对\(M,N\)是绝对的
\item 如果\(\psi\)是\(\Sigma_1\)公式，则
\begin{equation*}
\forall\barx\in M(\psi^M(\barx)\to\psi^N(\barx))
\end{equation*}
\item 如果\(\psi\)是\(\Pi_1\)公式，则
\begin{equation*}
\forall\barx\in M^n(\psi^N(\barx)\to\psi^M(\barx))
\end{equation*}
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\item 对公式的长度进行归纳证明
\item 例子：令\(M=\On\),\(N=\WF\)，令\(\psi(y):=\forall x\in y\forall u,v\in x(u\in v\vee v\in u\vee u=v)\)，则\(\psi\)是\(\Delta_0\)的，
则
\begin{align*}
&\psi^M(y)=\forall x\in M(x\in y\to\forall u,v\in M(u,v\in x\to(u\in v\vee v\in u\vee u=v)))\\
&\psi^N(y)=\forall x\in N(x\in y\to\forall u,v\in N(u,v\in x\to(u\in v\vee v\in u\vee u=v)))
\end{align*}
任取\(x_0\in\WF\setminus\On\)使得\((x_0,\in)\)不是线序，令\(y_0=\{x_0\}\)，则\(\psi^M(y_0)\)的前件假，
\(\psi^M(y_0)\)是真的，\(\psi^N(y_0)\)为假，因此
\begin{equation*}
\forall\barx(\psi^M(\barx)\to\psi^N(\barx))
\end{equation*}
错误

令\(x=\barx,y=\bary\)

设\(\psi:=\exists\varphi(x,y)\)，\(\varphi(x,y)\in\Delta_0\), \(\psi^M:=\exists y\in M(\varphi^M(x,y))\), \(\psi^N:=\exists y\in N(\varphi^N(x,y))\)，任取
\(a\in M^m\)，目标\(\psi^M(a)\to\psi^N(a)\)

若\(\psi^M(a)\)成立，则有\(b\in M^n\)使得\(\psi^M(a,b)\)，由\(\Delta_0\)的绝对性，\(\psi^N(a,b)\)，因此\(\exists y\psi^N(a,y)\)
\item 设\(\psi:=\forall y\varphi(x,y)\)其中\(\varphi\in\Delta_0\)，则\(\psi^M:=\forall y\in M\varphi^M(x,y)\)，\(\psi^N:=\forall y\in N\varphi^N(x,y)\)，设\(a\in M\)使
得\(\psi^N(a)\)成立，目标\(\psi^M(a)\)成立。

\(\psi^N(a)\Rightarrow\)对所有的\(b\in N\)均有\(\varphi^N(a,b)\)成立，故对一切\(b\in M\)有\(\varphi^N(a,b)\)成立，由\(\varphi\)的绝
对性，\(\forall y\in M\varphi^M(a,y)\)
\end{enumerate}
\end{proof}

\begin{lemma}[]
设\(M\subseteq N\)，均是句子集\(\Sigma\)的模型，而\(\Sigma\vdash\forall\barx(\varphi(\barx)\leftrightarrow\psi(\barx))\)，则\(\varphi\)对\(M\)与\(N\)绝对
当且仅当\(\psi\)也是
\end{lemma}

\begin{proof}
\(M,N\vDash\forall\barx(\varphi(\barx)\leftrightarrow\psi(\barx))\)

\(\forall\barx\in M^n(\varphi^M(\barx)\leftrightarrow\psi^M(\barx))\)，\(\forall\barx\in N^n(\varphi^N(\barx)\leftrightarrow\psi^N(\barx))\)

若\(\varphi\)是绝对的,\(\forall\barx\in M^n(\varphi^M(\barx)\leftrightarrow\varphi^N(\barx))\)

因此\(\forall\barx\in M^n(\psi^M(\barx)\leftrightarrow\psi^N(\barx))\)
\end{proof}

\begin{definition}[]
假设\(M\subseteq N\)，\(f(x_1,\dots,x_n)\)是函数（类），设\(f(x_1,\dots,x_n)\)被公式\(\varphi(x_1,\dots,x_n,y)\)定义，称\(f\)相对
于\(M,N\)是绝对的，是指
\begin{enumerate}
\item \(\varphi(x_1,\dots,x_n,y)\)相对于\(M,N\)绝对
\item \(\forall\barx\in M^n\exists!y\in M(\varphi^N(\barx,y))\)
\end{enumerate}
\end{definition}

由上一引理，\(f\)的绝对性与定义\(f\)的公式无关

\(f^M=\{(x_1,\dots,x_n,y)\in M^{n+1}\mid\varphi^M(\barx,y)\}\),\(f\uhr M=\{(x_1,\dots,x_n,y)\in M^{n+1}\mid\varphi(\barx,y)\}\)

\(f\)是绝对的当且仅当\(\forall\barx M\forall y\in M(\varphi(\barx,y)\leftrightarrow\varphi^M(\barx,y))\)当且仅当\(\varphi(M^n,M)=\varphi^M(M^n,M)\)，
即\(f\uhr M=f^M\)

即对任意\(\bara\in M^n\)，有\(f\uhr M(\bara)=f^M(\bara)\)

\begin{theorem}[]
以下关系和函数可以在\(\ZFm-\Pow-\Inf\)中用公式定义，且在\(\ZFm-\Pow-\Inf\)下等价于一
个\(\Delta_0\)-formula
\begin{enumerate}
\item \(x\in y\)
\item \(x=y\)
\item \(x\subset y\)
\item \(\{x,y\}\)
\item \(\{x\}\)
\item \((x,y)\)
\item \(\emptyset\)
\item \(x\cup y\)
\item \(x\cap y\)
\item \(x-y\)
\item \(x^+=x\cup\{x\}\)
\item \(x\)传递
\item \(\bigcup x\)
\item \(\bigcap x\)，且\(\bigcap\emptyset=\emptyset\)
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{enumerate}
\setcounter{enumi}{3}
\item 函数\(z=\{x,y\}\)被公式\(\forall u\in z(u=x\vee u=y)\wedge(x\in z\wedge y\in z)\)
\item \(y=\{x\}\)被公式\(\forall u\in y(u=x)\wedge (x\in y)\)
\item 函数\(z=(x,y)\)被公式\(\forall u\in z(u=x\vee x=\{x,y\})\wedge x\in z\wedge \exists  u\in z(u=\{x,y\})\)
\item \(\forall y\in x(y\neq y)\)
\item 函数\(z=x\cup y\)被公式\(\forall x\subset z\wedge y\subset z\wedge\forall u\in z(u\in x\vee u\in y)\)
\item 函数\(z=x\cap y\)被公式\(z\subset x\wedge z\subset y\wedge\forall u\in x(u\in y\to u\in z)\)
\item 函数\(z=x-y\) \(\forall u\in z(u\in x\wedge u\notin y)\wedge \forall u\in x(u\notin y\to u\in z)\)
\item 函数\(z=x^+\) \(\forall u\in z(u\in x\vee u=x)\wedge x\in z\wedge x\subset z\)
\item \(\forall y\in x(y\subset x)\)
\item 函数\(z=\bigcup x\), \(\forall u\in z\exists y\in x(u\in y)\wedge\forall u\in x(u\subset z)\)
\item 函数\(z=\bigcap x\), \(x=\emptyset\to z=\emptyset\wedge\forall u\in z\forall y\in x(u\in y)\wedge\exists y\in x\forall u\in z(\forall w\in x(u\in w)\to u\in z)\)
\end{enumerate}
\end{proof}

\begin{lemma}[]
如果\(M\)是一个传递类，\(f\)是一个被\(\Delta_0\)公式定义的函数，如果\(f\)在\(M\)上封闭，
即\(f(M^n)\subseteq M\),则\(f\)相对于\(M\)绝对
\end{lemma}

\begin{proof}
设\(f\)被\(\varphi(\barx,y)\)定义，\(\forall\barx,y\in M(\varphi(\barx,y)\leftrightarrow\varphi^M(\barx,y))\),\(\forall\barx\in M\exists!y\in M(\varphi(\barx,y))\)
\end{proof}

\begin{corollary}[]
之前的函数均在\(\ZFm-\Pow-\Inf\)的传递模型\(M\)中绝对的

\(\ZFm-\Pow-\Inf\)能够保证函数封闭，传递性保证定义它们的公式的绝对性
\end{corollary}

\begin{lemma}[]
绝对性对复合运算封闭，即假设\(M\subseteq N\),公式\(\varphi(x_1,\dots,x_n)\)函
数\(f(x_1,\dots,x_n)\), \(g_i(y_1,\dots,y_m)\),\(1\le i\le n\)都相对于\(M,N\)绝对，则
\(\varphi(g_1(y_1,\dots,y_m),\dots,g_n(y_1,\dots,y_m))\)与\(f(g_1(y_1,\dots,y_m),\dots,g_n(y_1,\dots,y_m))\)也相对于\(M,N\)绝对
\end{lemma}

\begin{proof}
不妨设\(m=n=1\)

设\(g(y)=z\)被\(\theta(y,z)\)定义，\(\varphi(g(y)):=\exists z(\theta(y,z)\wedge\varphi(z))\)

\(\varphi^M(g(y)):=\exists z\in M(\theta^M(y,z)\wedge\varphi^M(z))\),\(\varphi^N(g(y)):=\exists z\in N(\theta^M(y,z)\wedge\varphi^M(z))\)

由绝对性
\(\forall z\in M\forall y\in M(\theta^M(y,z)\wedge\varphi^M(z)\leftrightarrow\theta^N(y,z)\wedge\varphi^N(z))\)

任取\(y_0\in M\)，设\(\exists z\in N(\theta^N(y_0,z)\wedge\varphi^N(z))\)，由函数\(g(y)=z\)的绝对性，
\(\forall y\in M\exists! z\in M(\theta^N(y,z))\)，存在唯一的\(z_0\in M\)使得
\(\theta^N(y_0,z_0)\wedge\varphi^N(z_0)\)
\end{proof}

\begin{theorem}[]
以下关系和函数对任意\(\ZFm-\Pow\Inf\)的传递模型\(M\)都是绝对的
\begin{enumerate}
\item \(z\)是有序对
\item \(A\times B\)
\item \(R\)是关系
\item \(\dom(R)\)
\item \(\ran(R)\)
\item \(f\)是函数
\item \(f(x)\)
\item \(f\)是一一函数
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{enumerate}
\item ``\(z\)是有序对''：\(\exists u,v(z=(u,v))\)，但是这不是\(\Delta_0\)，因此考虑
\(\exists u\in\bigcup z\exists v\in\bigcup z(z=(u,v))\)，注意这里不是平常的受囿量词，但是
令\(g_1(z)=\bigcup z\), \(g_2(z)=\bigcup z\), \(g_3(z)=z\), \(\varphi(x_1,x_2,x_3):=\exists u\in x_1\exists v\in x_2(x_3=(u,v))\)，则
\(g_1,g_2,g_3,\varphi\)绝对，故\(\varphi(g_1(z),g_2(z),g_3(z))\)绝对
\item 函数\(z=x\times y\): \(\forall u\in z\exists s\in x\exists t\in y(u=(s,t))\wedge\forall s\in x\forall t\in y\exists u\in z(u=(s,t))\)
\item \(R\)是关系\(\Leftrightarrow \forall u\in R(u\text{是有序对})\)
\item 函数，\(D=\dom(R)\): \(\forall x\in D\exists z\in R\exists u\in z\exists y\in u(z=(x,y))\)且
\(\forall z\in R\forall u\in z\forall x\in u\forall y\in u(z=(x,y)\to x\in D)\)
\item 同理
\item \(f\text{是关系}\wedge\forall x\in\dom(f)\exists!y\in\ran(f)\exists u\in f(u=(x,y))\)
\item \(\varphi(f(x))\)表示\(f\)是函数且\(x\in\dom(f)\),则``\(y=f(x)\)''定义为
\(\varphi(f,x)\to\exists u\in f(u=x,y)\vee(\neg\varphi(f,x)\to y\neq\emptyset)\)
\item ``\(f\)是函数''且\(\forall s\in\dom(f)\forall t\in\dom(f)(f(s)=f(t)\to s=t)\)
\end{enumerate}
\end{proof}
\subsection{基础公理的相对一致性}
\label{sec:orgc658006}
如果\(\ZFm\)一致，则\(\ZF\)一致

目标：\(V\vDash\ZFm\)，证明\(\WF\vDash\ZF\)，等价于\(\ZFm\vdash(\ZF)^{\WF}\)

\begin{lemma}[]
若传递类\(M\)是\(\ZFm-\Pow-\Inf\)的模型，且\(\omega\in M\)，则无穷公理在\(M\)中为真，因此无穷公理
在\(\WF\)中为真（\(\ZFm\vdash(\Inf)^{\WF}\)）
\end{lemma}

\begin{proof}
\begin{itemize}
\item 由于\(\emptyset\)与\(x^+\)都被\(\Delta_0\)公式定义
\item 若\(M\vDash\ZFm-\Pow-\Inf\)，则\(x^+\)在\(M\)中封闭，且\(\emptyset\in M\)
\item \(\emptyset^M=\emptyset\), \((x^+)^M=x^+\)
\item 无穷公理的相对化为\(\exists x\in M(\emptyset\in x\wedge\forall y\in x(y^+\in x))\)
\item 即\(\exists x\in M(\emptyset\in M\wedge\forall y\in x(y^+\in x))\)
\item 由于\(\omega\in M\)，令\(x=\omega\)
\end{itemize}
\end{proof}

结论： \(\WF\vDash\ZF\)


目标：\(Con(\ZFm)\vdash Con(ZF)\)

\begin{theorem}[]
设\(T\) (\(\ZFm\))是集合论的的理论，\(\Sigma\) (\(\ZF\))是一个句子集， 设\(M\)是一个类且非空，如
果\(T\vdash(M\vDash\Sigma)\)，即\(T\vdash\Sigma^M\)或者“若\(V\vDash T\)，则\(V\vDash\Sigma^M\)”，则
\begin{enumerate}
\item 对集合论语言的任何语句\(\varphi\)，如果\(\Sigma\vdash\varphi\)，则\(T\vdash\varphi^M\)
\item 如果\(T\)一致，则以\(\Sigma\)为公理的理论也一致
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{enumerate}
\item 设\(\varphi_1,\dots,\varphi_n=\varphi\)是\(\Sigma\)的一个证明，对\(k\le n\)，归纳证明\(T\vdash\varphi_k^M\)
\begin{itemize}
\item 若\(\varphi_i\in\Sigma\cup Ax\),\(Ax\)一阶逻辑的公理，\(T\vdash\varphi_i^M\)
\item 若\(i,j<k\)使得\(\varphi_j=\varphi_k\to\varphi_k\)，由归纳假设\(T\vdash\varphi_i^M\), \(T\vdash\varphi_i^M\to\varphi_k^M\),因此\(T\vdash\varphi_k^M\)
\end{itemize}
\item 若\(\Sigma\)不一致，则存在\(\varphi\)使得\(\Sigma\vdash\varphi\wedge\neg\varphi\)，从而\(T\vdash(\varphi\wedge\neg\varphi)^M\)，故\(T\)不一致
\end{enumerate}
\end{proof}

\begin{theorem}[]
基础公理相对于\(\ZFm\)一致，即如果\(\ZFm\)一致，则\(\ZF\)一致
\end{theorem}

\begin{proof}
\begin{itemize}
\item \(\ZFm\vdash(\ZF)^{\WF}\)
\item 故\(\ZFm\)一致能推出\(\ZF\)一致
\end{itemize}
\end{proof}

选择公理：任何非空集合都可被良序化
\(\forall X\exists R(R\text{是$X$上的良序})\)
\begin{enumerate}
\item \(R\subseteq X\times X\)
\item \(R\)是线序
\item \(\forall Y\subseteq X\), \(Y\neq\emptyset\Rightarrow\)Y存在\(R\)-极小元
\end{enumerate}


\begin{lemma}[\(\ZFm\)]
设\(M\)是\(\ZFm-\Pow-\Inf\)的传递模型，如果\(X,R\in M\)并且\(R\)是\(X\)上的一个良序，
则\((R\text{是$X$的良序})^M\)
\end{lemma}

\begin{proof}
“\(R\)是\(X\)上的线序”被公式\(\varphi(X,R)\)表达
\begin{itemize}
\item \(R\)是关系
\item \(\forall x\in X(\neg R(x,x))\)
\item \(\forall x,y,z\in X(R(x,y)\wedge R(y,z))\to R(x,z)\)
\item \(\forall x,y\in X(R(x,y)\vee R(y,x)\vee x=y)\)

\(R(x,y)\)表示\((x,y)\in R\),\(\exists z\in R(z=(x,y))\)
\end{itemize}


因此\(\varphi(X,R)\)是\(\Delta_0\)-公式

令公式\(\psi(X,Y,R)\)为\(Y\subseteq X\wedge Y\neq\emptyset\to\exists y\in Y\forall x\in Y(\neg R(x,y))\)，则\(\psi(X,Y,R)\)是\(\Delta_0\)-公式，
“\(R\)是\(X\)上的良序”可以表达为\(\theta(X,Y)=\varphi(X,R)\wedge\forall Y\psi(X,Y,R)\)

则\(\theta\)是一个\(\Pi_1\)-公式

\(\forall X\in  M\forall R\in M(\theta(X,R)\to\theta^M(X,R))\)，任取\(X_0,R_0\in M\)使得\(R_0\)是\(X_0\)上的良序，
则\(\theta(X_0,R_0)\)，故\(\theta^M(X_0,R_0)\)也成立，即
\end{proof}

\begin{theorem}[\(\ZFm\)]
\(V_\omega\)是\(\ZFC-\Inf+\neg\Inf\)的模型
\end{theorem}

\begin{proof}
与\(\WF\)类似，\(V_\omega\)是传递的，且关于\(\{x,y\}\),\(\bigcup x\),\(\calp(x)\)封闭，故而是\(\ZF-\Inf\)的模型
（练习）

\(\neg\Inf\): \(\forall x\neg(\emptyset\in X)\wedge\forall y\in x(y^+\in x)\)

\(\neg\Inf^M\): \(\forall x\in M(\emptyset^M\in X\wedge\forall y\in x((y^+)^M\in x))\)

由于\(M=V_\omega\)传递，故\((\neg\Inf)^M\): \(\forall x\in M(\emptyset\in X\wedge\forall y\in x(y^+\in x))\)

由于\(V_\omega\)中没有无穷集，故\((\neg\Inf)^M\)在\(V\)中成立

\(AC^M\):任取\(X\in V_\omega\),若\(X\neq\emptyset\)，存在\(R\in V_\omega\)使得\(R\)是\(X\)上的良序

\(\rank(\calp(x\times y))<\max(\rank(x),\rank(y))\)，故
\(\calp(x\times x)\in V_\omega\)
\end{proof}

\begin{corollary}[]
\(Con(\ZFm)\vdash Con(\ZFC-\Inf+\neg\Inf)\)
\end{corollary}
\subsection{基于良基关系的归纳与递归}
\label{sec:orgcb5c6cf}
\begin{definition}[]
类\(R\)（\(\varphi(x,y)\)）是类\(X\)（\(\psi(x)\)）上的良基关系当且仅当
\begin{equation*}
\forall U\subset X(U\neq\emptyset\to\exists y\in U(\neg\exists z\in U(zRy)))
\end{equation*}
\(U\)是集合
\end{definition}

\begin{examplle}[]
\(\in\)是\(\On\)上的良基关系

如果\(Fud\)成立，则\(\in\)是\(V\)上的良基关系
\end{examplle}

\begin{theorem}[超穷归纳原理]
设\(\varphi(x)\)是一个公式，若\(\forall\alpha\in On\)有\(\forall\beta(\beta<\alpha\to\varphi(\beta))\to\varphi(\alpha)\)，则\(\forall\alpha\in\On(\varphi(\alpha))\)
\end{theorem}

\begin{theorem}[超穷递归定理]
设\(G:V\to V\)的函数，则存在唯一的函数\(F:\On\to V\)使得
\begin{equation*}
F(\alpha)=G(F\uhr\alpha)
\end{equation*}
\end{theorem}

\begin{definition}[]
类\(X\)上的关系，类\(R\)是 \textbf{似集合} 的当且仅当对任意\(x\in X\)，有\(\{y\in X\mid yRx\}\)是一个集合
\end{definition}

类的元素一定是集合，因为类是集合宇宙的一个子区域

一般称\(\{y\in X\mid yRx\}\)中的元素为\(x\)的前驱，\(\in\)是任何类\(X\)上的似集合关系

\begin{definition}[]
如果\(R\)是\(X\)上的似集合关系，且\(x\in X\)，则递归定义
\begin{itemize}
\item \(\pred^0(X,x,R)=\{y\in X\mid yRx\}\)
\item \(\pred^{n+1}(X,x,R)=\bigcup\{\pred(X,y,R)\mid y\in\pred^n(X,x,R)\}\)
\item \(\cl(X,x,R)=\bigcup_{n\in\omega}\pred^n(X,x,R)\)
\end{itemize}
\end{definition}

对每个\(n\),\(\pred^n(X,x,R)\)是集合

故\(\cl(X,x,R)\)是集合

若\(R\)是\(\in\)，且\(X\)是传递的，则\(\cl(X,x,R)=x\)


\begin{lemma}[]
如果\(R\)是\(X\)上的似集合关系，则对任意\(y\in\cl(X,x,R)\)，都有\(\pred(X,y,R)\subseteq\cl(X,x,R)\)
\end{lemma}

\begin{proof}
设\(y\in\cl(X,x,R)\)，则存在\(n\in\omega\)使得\(y\in\pred^n(X,x,R)\)，故\(\pred(X,y,R)\subseteq\pred^{n+1}(X,x,R)\)
\end{proof}

\begin{theorem}[]
如果\(R\)是\(X\)上的良基关系， 且是似集合的，则\(X\)的每个非空子类\(Y\)都有\(R\)-极小元
\end{theorem}

\begin{proof}
任取\(x\in Y\)，若\(x\)不是\(Y\)的\(R\)-极小元，则\(\pred(X,x,R)\cap Y\)非空，于是\(Y\cap\cl(X,x,R)\)非
空，令\(x_0\in Y\cap\cl(X,x,R)\)为极小元，则\(x_0\)是\(Y\)的极小元，否则\(\pred(X,x_0,R)\cap Y=\emptyset\)，任
取\(z_0\in\pred(X,x_0,R)\cap Y\)，则\(z_0\in Y\), \(z_0\in\cl(X,x,R)\)，于是\(z_0\in Y\cap\cl(X,x,R)\)
且\(z_0Rx_0\)，与\(x_0\)的极小性矛盾
\end{proof}

\begin{remark}
假设基础公理，则\(\in\)是\(V\)上的良基关系，若\(V\neq\WF\)，则\(V\setminus\WF\)有极小元\(x_0\)非空，但
是\(\forall y\in x_0(y\in\WF)\)，于是\(x_0\subset\WF\)，矛盾，因此\(V=\WF\)
\end{remark}

\begin{theorem}[]
设\(R\)是\(X\)上的似集合的良基关系，如果\(F:X\times V\to V\)是“函数”，则存在唯一的“函数”\(G:X\to V\)使得
\(\forall x\in X(G(x)=F(x, G\uhr\pred(X,x,R)))\)
\end{theorem}

练习
\begin{proof}
\begin{enumerate}
\item 存在性

令公式\(\theta(x,t)\)表示
\begin{itemize}
\item \(t\)是一个函数（集合）
\item \(\dom(t)=\{x\}\cup\pred(X,x,R)\)
\item \(\forall y\in\dom(t)(t(y)=F(y,t\uhr\pred(X,y,R)))\)
\item \(\forall y\notin\dom(t)(t=\emptyset\)
\end{itemize}
令\(G=\{(x,y)\mid\theta(x,y)\}\)，证明\(G\)是函数：
\end{enumerate}


\begin{enumerate}
\item 唯一性

若不唯一，则存在最小的\(x\in X\)使得\(G(x)\neq G(x')\). 但是\(G(x)=F(x,G\uhr(X,x,R))=F(x,G'\uhr(X,x,R))=G'(x)\)
\end{enumerate}
\end{proof}

\begin{definition}[]
如果\(R\)是\(X\)上的似集合关系，设\(x\in X\)，则定义
\begin{equation*}
\rank(x,X,R)=\sup\{\rank(y,X,R)+1\mid yRx\wedge y\in X\}
\end{equation*}
(来自超穷递归)
\end{definition}

\begin{definition}[\(\ZFm\)]
如果类\(X\)传递，且\(\in\)是\(X\)上的良基关系，则\(X\subseteq\WF\)且对任意\(x\in X\)有\(\rank(x,X,\in)=\rank(x)\)
\end{definition}

\begin{proof}
若\(X\not\subseteq\WF\), 取极小元\(x_0\in X\setminus\WF\)，显然\(x_0\neq\emptyset\)。任取\(z\in x_0\)，由传递性，有\(z\in X\cap\WF\)，
于是\(x_0\subseteq\WF\)，于是\(X\subseteq\WF\)

令\(Y=\{x\in X\mid\rank(x,X,\in)\neq\rank(x)\}\)，如果\(Y\)非空，令\(x_0\)为\(Y\)的极小元，根据传递
性,\(x_0\subseteq X\)，且\(\forall z\in x_0\),\(\rank(z,X,\in)=\rank(z)\)

\(\rank(x_0,X,\in)=\sup\{\rank(z,X,\in)+1\mid z\in x_0\}\)

\(\rank(x_0)=\sup\{\rank(z)+1\mid z\in x_0\}\)
\end{proof}

\begin{definition}[]
令类\(R\)是\(X\)上似集合的良基关系，则\((X,R)\)上的 \textbf{mostowski函数} \(G\)定义为
\begin{equation*}
G(x)=\{G(y)\mid y\in X\wedge yRx\}
\end{equation*}

\(G\)的值域记作\(M\)，称之为\((X,R)\)的 \textbf{Mostowski坍塌}
\end{definition}

\begin{lemma}[]
设\(R\)是\(X\)上的一个似集合的良基关系，\(G\)是其上的Mostowski函数，\(M\)为其Mostowski坍塌，则
\begin{enumerate}
\item \(\forall x,y\in X(xRy\to G(x)\in G(y))\), \(G:(X,R)\to(V,\in)\)同态
\item \(M\)是传递集
\item 如果幂集公理成立，则\(M\subseteq\WF\) (\(\ZFm-\Pow-\Inf\))
\item 如果幂集公理成立，且\(x\in X\)，则\(\rank(x,X,R)=\rank(G(x))\)
\end{enumerate}
\end{lemma}

\begin{proof}
\begin{enumerate}
\setcounter{enumi}{2}
\item 断言：\((M,\in)\)是良基的

任取\(Y\subseteq M\)非空，则\(G^{-1}(Y)\subseteq X\)非空，有极小元\(x_0\)，若\(G(x_0)\)不是\(Y\)的极小元，
则\(G(x_0)\cap Y\neq\emptyset\)。令\(z\in G(x_0)\cap Y\)，则存在\(y\in G^{-1}(Y)\)使得\(G(y)=z\)且\(yRx_0\)，
与\(x_0\)极小矛盾
\item 设\(x\in X\), \(\rank(G(x))=\sup\{\rank(v)+1\mid v\in G(x)\}=\sup\{\rank(G(y))+1\mid y\in X\wedge yRx\}\)

设\(x_0\)是使得等式不成立的极小元，则对任意\(y\in X\), \(yRx_0\to\rank(y,X,R)=\rank(G(y))\)

\(\rank(x,X,R)=\sup\{\rank(y,X,R)+1\mid yRx\wedge y\in X\}=\sup\{\rank(G(y))+1\mid yRx\wedge y\in X\}=\rank(G(x))\)
\end{enumerate}
\end{proof}

那么\(G\)在什么条件下是个同构

\begin{definition}[]
\(R\)是\(X\)上的 \textbf{外延} 的关系当且仅当
\begin{equation*}
\forall x,y\in X(\forall z\in X(zRx\leftrightarrow zRy)\to x=y)
\end{equation*}
\end{definition}

\begin{lemma}[]
如果\(X\)是传递的，则\(\in\)在\(X\)上是外延的
\end{lemma}

\begin{proof}
\(\pred(X,x,\in)=x\)
\end{proof}

\begin{lemma}[]
令\(R\)是\(X\)上的似集合良基关系，如果\(R\)在\(X\)上是外延的，则\(G\)是同构
\end{lemma}

\begin{proof}
若\(G\)不是单射，即\(Y=\{x\in X\mid\exists y\in X(x\neq y\wedge G(x)=G(y))\}\)非空，则有极小元\(x_0\)，取极小
的\(y_0\in Y\)使得\(x_0\neq y_0\)且\(G(x_0)=G(y_0)\)，存在\(z_0\in X\)使得\(\neg(z_0Rx_0\leftrightarrow z_0Ry_0)\)

若\(z_0Rx_0\)，\(\neg z_0Ry_0\)，则\(G(z_0)\in G(x_0)\), \(G(z_0)\notin G(y_0)\)
\end{proof}

\begin{theorem}[莫斯托夫斯基坍塌定理]
令\(R\)是\(X\)上的似集合良基关系，并且在\(X\)上是外延的，则存在传递类\(M\)和双射\(G\)满
足\(G:X\to M\)满足：\(G\)是\((X,R)\)与\((M,\in)\)之间的同构。另外\(M\)和\(G\)唯一
\end{theorem}

\subsection{基础公理的绝对性}
\label{sec:org17f6fd7}
已知\(\ZFm\)一致\(\Rightarrow \ZF\)一致

本节工作于\(\ZF\)中

\begin{theorem}[]
以下关系和函数可以在\(\ZF-\Pow\)中用公式定义，且\(\ZF-\Pow\)可以证明这些公式等价于\(\Delta_0\)公式，
所以它们对任意\(\ZF-\Pow\)的传递模型绝对
\begin{enumerate}
\item \(x\)是序数
\item \(x\)是极限序数
\item \(x\)是后继序数
\item \(\omega\)
\item \(x\)是有穷序数
\item \(0,1,2,\dots,20,\dots\)
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{enumerate}
\item \(\in\)良基

\(x\)是序数\(\Leftrightarrow x\)是传递集且\(\in\)是\(x\)上的线序

即\(\forall y\in x(y\subset x)\wedge\forall y,z\in x(y\in z\vee y=z\vee z\in y)\)

\item 令\(\psi(x)\)为“\(x\)是序数”且\(\forall y\in x\exists z\in x(y\in z)\)

\setcounter{enumi}{3}
\item 令\(\psi(x)\)为“\(x\)是极限序数”且\(\emptyset\in x\)且\(\forall y\in x(y\text{ is limit}\to y=\emptyset)\)

\item 令\(\psi(x)\)为 “\(x\)是序数”且\(x\neq\omega\)且\(\forall y\in x(y\neq\omega)\)

\item 归纳证明：\(\emptyset\): \(\forall y\in x(y\neq y)\) \(\psi_0(x)\)

假设\(n\)被\(\psi_n(x)\)定义，则\(\psi_{n+1}(x):\exists y\in x(\psi_n(y)\wedge x=y^+)\)
\end{enumerate}
\end{proof}

\begin{remark}
令\(\psi_{limit}(x)\)定义极限序数，即使\(V\vDash\neg\Inf\)，\(\psi_{limit}(x)\)相对于\(\ZF-\Pow+\neg\Inf\)的传递
模型\(M\)仍然是绝对的，此时，\(V\vDash\forall x(\psi_{limit}(x)\to x=\emptyset)\)

同理定义\(\omega\)的\(\psi_\omega(x)\)也是绝对的，此时
\(V\vDash\neg\exists(\psi_\omega(x))\)

若\(V\)和\(M\)均满足\(\Inf\)，则\(\omega\in M\)且\(\psi_\omega(\omega)\leftrightarrow\psi_\omega^M(\omega)\)
\end{remark}

\begin{lemma}[]
如果\(M\)是\(\ZFm-\Pow\)的传递模型，则\(M\)的所有有穷子集都是\(M\)的元素
\end{lemma}

\begin{proof}
令\(\sigma_n\)为
\begin{equation*}
\forall x\subset M(\abs{x}=n\to x\in M)
\end{equation*}
\(V\)看到的
\begin{enumerate}
\item \(\sigma_0\),\(V\vDash(\ZF-\Pow)^{M}\)，由于\(\ZF-\Pow\vdash\exists x(x=\emptyset)\)，故\(V\vDash\exists x\in M(x=\emptyset^M)\)，而空集是一个绝对
概念，因此\(V\vDash\exists x\in M(x=\emptyset)\)
\item 假设\(\sigma_n\)成立，任取\(x\subset M\) s.t. \(\abs{x}=n+1\),任取\(y\in x\)，则\(y\in M\)，
\end{enumerate}
\end{proof}

\begin{theorem}[]
以下概念对\(\ZF-\Pow\)的任何传递模型都是绝对的
\begin{enumerate}
\item \(x\)是有穷的
\item \(X^n\)
\item \(X^{<\omega}\)即\(X\)上所有有穷序列的集合
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{enumerate}
\item 令\(\psi(x,f)\)表示“\(f\)是函数”且\(\dom(f)=x\)且\(\ran(f)\in\omega\)且``\(f\)是一一的''

显然\(\psi(x,f)\)是绝对的，\(x\)有穷\(\Leftrightarrow \exists f\psi(x,f)\)

目标：\(\forall x\in M(x\text{ finite}\leftrightarrow(x\text{ finite})^M)\)，即
\(\forall x\in M(\exists f\psi(x,f)\leftrightarrow\exists f\in M\psi(x,f))\)

任取\(x_0\in M\)，若存在\(f_0\in M\)使得\(\psi^M(x_0,f_0)\)成立，则\(\psi(x_0,f_0)\)成立，

若存在\(f\)使得\(\psi(x_0,f)\)成立，下面证明\(f_0\in M\)。存在\(n\in\omega\)使得\(f_0:x\to n\)是一一的函数，
\(f_0\subseteq x_0\times n\)是有穷集

\(n\)与\(x_0\)均属于\(M\),故\(x_0\times n\in M\)，故\(x_0\times\subset M\),故\(f_0\subseteq M\)是有穷子集，

\item \(X^n\)是\(n\)到\(X\)的所有函数的集合

令\(f:n\to X\)表示“\(f\)是函数”且\(\dom(f)=n\)且\(\ran(f)\subseteq X\)

\(f\)是绝对的，于是\(\forall f,n,X\in M((f:n\to X)\leftrightarrow(f:n\to X)^M)\)

定义函数
\begin{equation*}
F(X,n)=
\begin{cases}
0&n\notin\omega\\
\{f\mid f:n\to x\}&n\in\omega
\end{cases}
\end{equation*}
\(Z=F(X,n)\)被公式\(\psi(X,n,z)\)表示：\((n\notin\omega\to z=0)\wedge(n\in\omega\to z=\{f\mid f:n\to x\})\)

下面证明\(\psi\)的绝对性，只需证明\(\forall n\in\omega\)以及\(X_0,Z_0\in M\)，有
\begin{equation*}
\forall y\in Z_0(y:n\to X_0)\wedge\forall f((f:n\to X_0)\to f\in Z_0)
\end{equation*}
唯一的障碍是\(\forall f\)，但是因为当\(n,X_0\in M\)且\(f:n\to X_0\)，则\(f\)是\(M\)的有穷子集

故\(\psi(X,n,Z)\)是绝对的

下面验证, \(X^n\subseteq\calp(n\times X)\in M\)
\begin{equation*}
V\vDash\forall X\in M\forall n\in M\exists!Z\in M\psi(X,n,Z)
\end{equation*}
任取\(X\in M\)，若\(n\notin\omega\)，则\(F(X,n)=\emptyset\in M\)，若\(n\in\omega\)，定义
\(\theta_n(x,y)\)为
\begin{equation*}
\exists a_0\dots a_{n-1}(x=(a_0,\dots,a_{n-1})\wedge y=\{(0,a_0),\dots,(n-1,a_{n-1})\})
\end{equation*}
令\([X^n]\)表示\(n\)次笛卡儿积，显然\([X^n]\in M\)

\(\forall x\in[X^n]\exists!y\in M\theta_n^M(x,y)\)

由于\(M\)满足替换公理，故存在\(z\in M, X^n\subseteq z\)

根据分离公理
\begin{equation*}
V\vDash\exists u\in M\forall f\in M(f\in u\leftrightarrow f\in z\wedge(f:n\to x))
\end{equation*}
故\(u=X^n\in M\)

\item 先证明封闭，再证明绝对

首先证明函数\(Z=X^{<\omega}\)是绝对的

令\(F(x,n)=X^n\)，则\(Z=\bigcup\{F(x,0),F(x,1),\dots\}=\bigcup\ran(F(x,-))\uhr\omega\)

由于\(\omega\in M\)，于是\(\ran(F(x,-)\uhr\omega)\in M\)，由并集公理,\(\bigcup\ran(F(x,-)\uhr\omega)\in M\)

即\(x\in M\Rightarrow X^{<\omega}\in M\)

\(Z=X^{<\omega}\)被公式\(\varphi(x,z)\)定义：\(\forall f(f\in z\leftrightarrow\exists n(n\text{ fintie ordinal}\wedge f\in X^n))\)

验证：\(\forall x\in M\forall z\in M(\varphi(x,z)\leftrightarrow\varphi^M(x,z))\)

\(V\)看到所有有穷序数都在\(M\)中

于是\(\varphi\)绝对，\(\forall x\in M\exists!z\in M\varphi(x,z)\)
\end{enumerate}
\end{proof}

\begin{theorem}[]
以下概念对\(\ZFm-\Pow\)的任何传递模型都是绝对的
\begin{enumerate}
\item \(R\)是\(X\)上的良序（集合）
\item \(\type(x,R)\)
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{enumerate}
\item 已证明：\(\forall R\in M\forall x\in M(R\text{是$X$的良序}\to(\text{$R$是$X$的良序})^M)\)

另一方面，\(\ZF-\Pow\vdash\forall R\forall X[R\text{是$X$的良序}\to\exists\alpha\exists f(\alpha\text{ ordinal}\wedge f:(\alpha,\in)\cong(X,R)]\)

后面的部分是绝对的

同时这个也有\(M\)的相对化
\((\ZF-\Pow)^M\vdash\forall R\in M\forall X\in M[(R\text{是$X$的良序})^M\to\exists\alpha\in M\exists f\in M(\alpha\text{ ordinal}\wedge f:(\alpha,\in)\cong(X,R)]\)

若\(R_0,X_0\in M\)且\((R_0\text{是$X_0$的良序})^M\)，则存在\(\alpha\in M\), \(f\in M\),\(f:(\alpha,\in)\cong(X_0,R_0)\)，
因此\(V\vDash R_0\text{是$X_0$的良序}\)
\item 令\(W(X,R)\)表示\(R\)是\(X\)的良序，令\(\chi(X,R,Z)\)表示\(Z\)是序数且\(W(X,R)\)
且\(\exists f:(Z,\in)\cong(X,R)\)

则\(Z=\type(X,R)\Leftrightarrow\chi(X,R,Z)\)，而\(\chi\)是绝对（这里的问题是\(\exists f\)，要证明\(f\)一定在\(M\)中，参
考良序绝对性的证明）的
且\(\forall X,R\in M\exists!Z\in M\chi(X,R,Z)\) (练习)
\end{enumerate}
\end{proof}

\begin{theorem}[]
以下概念对\(\ZF-\Pow\)的任何传递模型都是绝对的
\begin{enumerate}
\item \(\alpha+1\)
\item \(\alpha-1\)
\item \(\alpha+\beta\)
\item \(\alpha\cdot\beta\)
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{enumerate}
\setcounter{enumi}{1}
\item \(x=\alpha-1\)被
\begin{equation*}
\alpha\neq 0\wedge((\alpha\text{后继}\wedge\alpha=x+1)\vee(\alpha\text{极限}\wedge\alpha=x))
\end{equation*}
\item 没有递归定义的绝对性

\(\alpha+\beta\)的定义为\(\type(\alpha\oplus\beta)\)

由于\(\type(-,-)\)是绝对的，只需证明\(\alpha\oplus\beta\)是绝对的

令\(F(\alpha\oplus\beta)=W\)，其中\(W=\{\alpha\times\{0\}\cup\beta\times\{1\}\}\)，再令\(G(\alpha\oplus\beta)=R\)，其中\(R\subseteq W^2\)且满足
\(\forall x\in\alpha\times\{0\}\forall y\in\beta\times\{1\}(xRy)\)且\(\forall x,y\in\alpha((x,0)R(y,0)\leftrightarrow x\in y)\)
且\(\forall x,y\in\beta((x,1)R(y,1)\leftrightarrow x\in y)\)

显然\(R\)是\(W\)的良序集

\(F\)是绝对的

令\(\psi(\alpha,\beta,R)\)为
\begin{align*}
\forall x\in R[&\exists a\in\alpha\exists b\in\alpha(a\in b\wedge x=((a,0),(b,0)))\\
&\vee\exists a\in\beta\exists b\in\beta(a\in b\wedge x=((a,1),(b,1)))\\
&\vee\exists a\in\alpha\exists b\in\beta(x=((a,0),(b,1)))]\\
\wedge\forall a,b\in\alpha&\exists x\in R(x=((a,0),(b,0)))\\
\wedge\forall a,b\in\beta&\exists x\in R(x=((a,1),(b,1)))\\
\wedge\forall a\in\alpha&\forall b\in\beta\exists x\in R(x=((a,0),(b,1)))
\end{align*}
用\(\theta(\alpha,\beta,x)\)表示方括号，则\(V\vDash\forall z(z\in R\leftrightarrow\theta(\alpha,\beta,z))\)

于是\(G(\alpha,\beta)=R\Leftrightarrow\psi(\alpha,\beta,R)\)

\(\psi,\theta\)是绝对的

若\(\alpha,\beta\in M\)，则\(\{x\mid\theta(\alpha,\beta,x)\}=\{x\in M\mid\theta(\alpha,\beta,x)\}=\{x\in M\mid\theta^M(\alpha,\beta,x)\}\subseteq M\),
\(R=\{x\in W^2\mid\theta^M(\alpha,\beta,x)\}\)，由分离公理，\(R\in M\)

故\(G(\alpha,\beta)=R\)是绝对的，

\(\alpha+\beta=\type(F(\alpha,\beta),G(\alpha,\beta))\)是绝对的
\item 同理：\(\alpha\cdot\beta=\type(\alpha\otimes\beta)\)是绝对的
\end{enumerate}
\end{proof}

设\(X\)是一个类，被公式\(X(x)\)定义，称\(X\)绝对是指\(\forall x\in M(X(x)\leftrightarrow X^M(x))\)

令\(X^M\)表示\(\{x\in M\mid x^M(x)\}\)，\(X\)对于\(M\)绝对\(\Leftrightarrow\) \(X^M=X\cap M\)

若\(M\)是\(ZF-\Pow\)的传递模型，则\(\On^M=M\cap\On\)

作为函数的类，\(G:X\to Y\)其中\(X,Y\)是类，是一个公式\(G(x,y)\)满足函数的条件

称\(G\)相对于类\(M\)是绝对的是指
\begin{enumerate}
\item \(\forall x\in X^M\exists!y\in Y^MG^M(x,y)\)，即\(G^M:X^M\to Y^M\)
\item \(\forall x\in M\forall y\in M(G^M(x,y)\leftrightarrow G(x,y))\)
\end{enumerate}


\begin{theorem}[]
设\(R\)是\(X\)的似集合的良基关系，\(F:X\times V\to V\)，令\(G:X\to V\)如递归定理所定义的：
\begin{equation*}
\forall x\in X(G(x)=F(x,G\uhr\pred(X,x,R)))
\end{equation*}
令\(M\)是\(ZF-\Pow\)的传递模型，且假设
\begin{enumerate}
\item \(F\)相对于\(M\)绝对的
\item \(X,R\)相对于\(M\)是绝对的
\item \((R\text{在$X$上是似集合的})^M\)
\item \(\forall x\in M(\pred(X,x,R)\subseteq M)\)
\end{enumerate}
则\(G\)对\(M\)是绝对的
\end{theorem}

\begin{proof}
阅读书中证明

\(V\vDash(X^M=X\cap M)\)

\(V\vDash(R^M=R\cap(M\times M))\)

\(V\vDash R^M=(X^M)^2\cap R\)

\(V\vDash(X^M,R^M)\)是良基的


\(R\)在\(X\)上是似集合的，\(\forall x\in X\exists z\forall y\in X(y\in z\leftrightarrow yRx)\)，它的相对化就是
\(\forall x\in X^M\exists z\in M\forall y\in X^M(y\in z\leftrightarrow yR^Mx)\)

故\((X^M,R^M)\)是似集合的且\(\forall x\in M(\pred(X^M,x,R^M)\in M)\)

由\(X\)与\(R\)的绝对性，\(\pred(X^M,x,R^M)=\pred(X,x,R)\cap M\)

由于\(\forall x\in M(\pred(X,x,R))\subseteq M\)，故\(\forall x\in M(\pred(X^M,x,R^M)=\pred(X,x,R))\)

\textbf{断言1} ：函数\(y=\pred(X,x,R)\)是绝对的

\(y=\pred(X,x,R)\)被公式\(\psi(x,y)\)表示：
\begin{equation*}
\forall z(z\in y\leftrightarrow z\in X\wedge zRx)
\end{equation*}
则\(\psi^M(x,y)\)为
\begin{equation*}
\forall z\in M(z\in y\leftrightarrow z\in X^M\wedge zR^Mx)
\end{equation*}
若\(x_0,y_n\in M\)，有\(z\in y_0\to z\in M\), \(zRx_0\to z\in M\)

故\(\psi\)绝对，由以上分析，若\(x\in M\)，则\(\pred(X,x,R)\in M\)。故\(y=\pred(X,x,R)\)是作为函数是绝对的

对任意的\(x\in M\)，有\((\pred(X,x,R))^M=\pred(X,x,R)=\pred(X^m,x,R^M)\)

先在\((X^M,R^M)\)是似集合的的良基关系，由绝对性，\(F^M:X^M\times M\to M\)，这些都是\(V\)看到的，那么由递归
定理，存在函数\(g:X^M\to V\)满足
\begin{equation*}
\forall x\in X^M(g(x)=F^M(x,g\uhr\pred(X^M,x,R^M)))
\end{equation*}
目标：证明\(g=G^M\)（书本）

问题：递归定理中的``\(G\)''只刻画了\(G\)的性质并非定义（元语言）

回亿：\(G(x)\)的定义
令公式\(\theta(x,t)\)表示
\begin{itemize}
\item \(t\)是一个函数（集合）
\item \(x\in X\)
\item \(\dom(t)=\{x\}\cup\pred(X,x,R)\)
\item \(\forall y\in\dom(t)(t(y)=F(y,t\uhr\pred(X,y,R)))\)
\item \(\forall y\notin\dom(t)(t=\emptyset)\)
\end{itemize}
则\(G(x)=y\Leftrightarrow \exists t(\theta(x,t)\wedge y=t(x))\)

下面证明\(\exists t(\theta(x,t)\wedge y=t(x))\)的绝对性

\textbf{断言2} ：\(\theta(x,t)\)是绝对的

只需证明\(t\uhr\pred(X,y,R)\)是绝对的，即若\(x_0\in X^M,y_0\in\pred(X,x_0,R)\)，\(t_0\in M\)，则
\(t_0\uhr\pred(X,y_0,R)=(t_0\uhr\pred(X,y_0,R))^M\)

函数\(s=t\uhr\pred(X,y,R)\)被公式
\begin{equation*}
\eta(y,t,s):=\forall x\in s\exists u\exists v(uRy\wedge v=t(u)\wedge x=(u,v))\wedge
\forall u\forall v(uRy\wedge v=t(u)\to (u,v)\in s)
\end{equation*}
验证：\(\eta\)是绝对的（练习），但是\(uRy\)，因此\(u\in M\),

故\(\theta(x,t)\)是绝对的

\textbf{断言3} ：\(\theta(x,t)\)定义了一个类函数，即\(V\vDash\forall x\in X\exists!t\theta(x,t)\)
练习（对\(x\in X\)归纳证明）

下面证明\(\theta\)作为函数是绝对的
\textbf{断言4} ：若\(x\in M\)，则\(\forall t(\theta(x,t)\to t\in M)\)

否则，存在一个极小的\(x_0\in M\),\(t_0\)使得\(\theta(x_0,t_0)\)且\(t_0\notin M\)

若\(\pred(X,x_0,R)=\emptyset\)，则由\(\theta\)的定义，\(t_0=\{(x_0,F(x_0,\emptyset))\}\in M\)，矛盾

若\(\pred(X,x_0,R)\neq\emptyset\)，令\(t^*=\{y\mid\exists x\in\pred(X,x_0,R)\wedge\theta(x,y)\}\)，由极小性，\(t^*\subseteq M\)

\(t^*=\ran(\theta\uhr\pred(X,x_0,R))\)

由归纳假设，\(\forall x\in\pred(X,x_0,R)\exists!y\in M(\theta(x,y))\)

于是\(\forall x\in\pred(X,x_0,R)\exists!y\in M(\theta^M(x,y))\)

因此\(t^*=\ran(\theta^M\uhr\pred(X,x_0,R))\)

由替换公理，\(t^*\in M\)，由绝对性
\begin{equation*}
t_0=(\bigcup t^*)\cup\{(x_0,F^M(x_0,\bigcup t^*))\}\in M
\end{equation*}
矛盾

故\(\forall x\in M\exists! t\in M\theta(x,t)\)，即\(\theta(x,t)\)作为函数绝对

记\(\phi(x,y):=\exists t(\theta(x,t)\wedge y=t(x))\)，则
\begin{equation*}
\phi^M(x,y)=\exists t\in M(\theta(x,t)\wedge y=t(x))
\end{equation*}
但是\(\forall x\in M\forall y\in M\)
\begin{equation*}
(\exists t(\theta(x,t)\wedge y=t(x)))\leftrightarrow\exists t\in M(\theta(x,t)\wedge y=t(x))
\end{equation*}

下面证明\(G(x)\)作为函数绝对，即\(G(x)\)封闭

回亿：\(g:X^M\to M\)满足
\begin{equation*}
\forall x\in X^M(g(x)=F^M(x,g\uhr\pred(X^M,x,R^M)))
\end{equation*}

\textbf{断言5} ：\(\forall x\in X^M(G(x)=g(x))\)

否则，存在“极小”的\(x_0\in X^M=X\cap M\)使得\(G(x_0)\neq g(x_0)\)

显然\(\pred(X,x_0,R)=\pred(X^M,x_0,R^M)\neq\emptyset\)，否
则\(g(x_0)=F^M(\emptyset,g\uhr\emptyset)=F^M(\emptyset,\emptyset)=F(\emptyset,g\uhr\emptyset)=G(x_0)\)

假设\(\pred(X,x_0,R)=\pred(X^M,x_0,R^M)\neq\emptyset\)，由\(x_0\)的极小性，
有\(\forall x\in\pred(X,x_0,R)\cap\pred(X^M,x_0,R^M)\)时，有\(G(x)=g(x)\)

因此\(G\uhr\pred(X,x_0,R)=g\uhr\pred(X^M,x_0,R^M)\)

\(g(x_0)=F^M(x_0,g\uhr\pred(X^M,x_0,R^M))=G(x_0)\)，矛盾
\end{proof}




\subsection{Exercise}
\label{sec:org1a2055b}
\begin{exercise}
\label{ex7.10.3}
\begin{enumerate}
\item \(V_\alpha=\{x\in\WF\mid\rank(x)<\alpha\}\)
\item \(\WF\) is transitive
\item \(\forall x,y\in\WF\), \(x\in y\Rightarrow\rank(x)<\rank(y)\)
\item \(\forall y\in\WF\), \(\rank(y)=\sup\{\rank(x)+1\mid x\in y\}\)
\end{enumerate}
\end{exercise}

\begin{proof}
\begin{enumerate}
\item by definition, \(x\in V_{\rank(x)+1}\setminus V_{\rank(x)}\), \(\rank(x)<\alpha\Rightarrow x\in V_{\rank(x)+1}\subseteq V_\alpha\)

\(\rank(x)\ge\alpha\Rightarrow x\notin V_\alpha\)

\item \(\WF\) is the ``union'' of transitive sets

\item \(y\in V_{\rank(y)+1}\setminus V_{\rank(y)}\), \(y\subseteq V_{\rank(y)}\), \(x\in y\Rightarrow x\in V_{\rank(y)}\Rightarrow\rank(x)<\rank(y)\)

\item by 3, \(\sup\{\rank(x)+1\mid x\in y\}\le\rank(y)\).

induction on \(\rank(y)\le\sup\{\rank(x)+1\mid x\in y\}\)
\begin{itemize}
\item \(\rank(y)=0\)
\item \(\rank(y)=\beta+1\), \(y\in V_{\beta+2}\setminus V_{\beta+1}\)

\(y\in V_{\beta+2}\Rightarrow y\subseteq V_{\beta+1}\). \(y\notin V_{\beta+1}\Rightarrow y\not\subseteq V_{\beta}\Rightarrow y\setminus V_\beta\) nonempty.
Let \(x\in y\setminus V_\beta\), \(\rank(x)\ge\beta\), \(\sup\{\rank(x)+1\mid x\in y\}\ge\beta+1=\rank(y)\)
\item \(\rank(y)=\gamma\) for some limit, then \(y\subseteq V_\gamma\) and for any \(\xi<\gamma\), \(y\not\subseteq V_\xi\),
let \(X_\xi\in y\setminus V_\xi\), then \(\rank(X_\xi)\ge\xi\), \(\sup\{\rank(x)+1\mid x\in y\}\ge\sup\{\xi+1\mid\xi<\rank(y)\}\ge\rank(y)\)
\end{itemize}
\end{enumerate}
\end{proof}

\begin{exercise}
\(R\)是似集合的，则
\(R\)是外延的当且仅当对任意\(x,y\in X\)
\begin{equation*}
x\neq y\to\pred(X,x,R)\neq\pred(X,y,R)
\end{equation*}
\end{exercise}

\begin{exercise}[7.10.7]
证明莫斯托夫斯基定理中的\(\bM\)和\(\bG\)唯一
\end{exercise}

\begin{proof}
假设\(M,N\)是传递类且\(f:(M,\in)\cong(N,\in)\)，\(S=\{x\in M\mid f(x)\neq x\}\)。
因为\(M\neq N\)，因此\(S\)非空，取\(S\)的极小元\(x_0\)，则对于任意\(y\in x_0\)，\(y=f(y)\in f(x_0)\)，
于是\(x_0\subset f(x_0)\)，又因为\(f\)是双射，同理有\(f(x_0)\subset x_0\)，于是\(f(x_0)=x_0\)，矛盾。因此\(M=N\)。

若\(f_1:(X,R)\cong(M,\in)\)，\(f_2:(X,R)\cong(N,\in)\)，则 \(M=N\)，于是\(f_1f_2=f_2f_1=\id\)，因此\(f_1=f_2\)
\end{proof}

\begin{exercise}[7.10.8]
证明以下概念对任意\(\ZF-\Pow\)的传递模型绝对
\begin{enumerate}
\item \(X^{<\omega}\)
\end{enumerate}
\end{exercise}

\begin{proof}
\begin{enumerate}
\item \(f\in X^{<\omega}\)当且仅当存在有穷序数\(n\)使得\(f\in X^n\)
\end{enumerate}

而任意这样的模型都有有穷序数
\end{proof}

\begin{exercise}[7.10.9]
\(V_\omega\vDash\ZF-\Inf+\neg\Inf\)
\end{exercise}

\begin{proof}

\end{proof}
\end{document}
