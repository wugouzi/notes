% Created 2022-03-06 Sun 11:45
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\graphicspath{{../../books/}}
\input{../preamble.tex}
\makeindex
\author{John Longley \& Dag Normann}
\date{\today}
\title{Higher Order Computability}
\hypersetup{
 pdfauthor={John Longley \& Dag Normann},
 pdftitle={Higher Order Computability},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 28.0.90 (Org mode 9.6)}, 
 pdflang={English}}
\begin{document}

\maketitle
\tableofcontents


\section{Theory of Computability Models}
\label{sec:org22ccaad}
\begin{itemize}
\item \(e\downarrow\) 'the value of \(e\) is defined'
\item \(e\uparrow\) 'the value of \(e\) is undefined'
\item \(e=e'\) 'the values of both \(e\) and \(e'\) are defined and they are equal'
\item \(e\simeq e'\) 'if either \(e\) or \(e'\) is defined then so is the other and they are equal'
\item \(e\succeq e'\) 'if \(e'\) is defined then so it \(e\) and they are equal'
\end{itemize}


if \(e\) is a mathematical expression possibly involving the variable \(x\), we write \(\Lambda x.e\)
to mean the ordinary (possibly partial) function \(f\) defined by \(f(x)\simeq e\)

Finite sequences of length \(n\) starts from index 0.
\subsection{Higher-Order Computability Models}
\label{sec:org2f4792b}
\subsubsection{Computability Models}
\label{sec:org0d3a3eb}
\begin{definition}[]
A \textbf{computability model} \(\bC\)  over a set \(\sfT\) of \textbf{type names} consists of
\begin{itemize}
\item an indexed family \(\abs{\bC}=\{\bC(\tau)\mid\tau\in\sfT\}\) of sets, called the \textbf{datatypes} of \(\bC\)
\item for each \(\sigma,\tau\in\sfT\), a set \(\bC[\sigma,\tau]\) of partial functions \(f:\bC(\sigma)\to\bC(\tau)\), called the
\textbf{operations} of \(\bC\)
\end{itemize}


s.t.
\begin{enumerate}
\item for each \(\tau\in\sfT\), the identity function \(\id:\bC(\tau)\to\bC(\tau)\) is in \(\bC(\tau,\tau)\)
\item for any \(f\in\bC[\rho,\sigma]\) and \(g\in\bC[\sigma,\tau]\) we have \(g\circ f\in\bC[\rho,\tau]\) where \(\circ\) denotes ordinary
composition of partial functions
\end{enumerate}
\end{definition}

We shall use uppercase letters \(A,B,C,\dots\) to denote \textbf{occurrences} of sets within \(\abs{\bC}\):
that is, sets \(\bC(\tau)\) implicitly tagged with a type name \(\tau\). We shall write \(\bC[A,B]\)
for \(\bC[\sigma,\tau]\) if \(A=\bC(\sigma)\) and \(B=\bC(\tau)\)

In typical cases of interest, the operations of \(\bC\) will be 'computable' maps of some kind between datatypes

\begin{definition}[]
A computability model \(\bC\) is \textbf{total} if every operation \(f\in\bC[A,B]\) is a total
function \(f:A\to B\)
\end{definition}

\begin{definition}[]
A computability model \(\bC\) has \textbf{weak (binary cartesian) products} if there is an operation
assigning to each \(A,B\in\abs{\bC}\) a datatype \(A\bowtie B\in\abs{\bC}\) along with
operations \(\pi_A\in\bC[A\bowtie B,A]\) and \(\pi_B\in\bC[A\bowtie B,B]\) (known as \textbf{projections}) s.t. for
any \(f\in\bC[C,A]\) and \(g\in\bC[C,B]\) there exists \(\la f,g\ra\in\bC[C,A\bowtie B]\) satisfying the following for
all \(c\in C\)
\begin{enumerate}
\item \(\la f,g\ra(c)\downarrow\) iff \(f(c)\downarrow\) and \(g(c)\downarrow\)
\item \(\pi_A(\la f,g\ra(c))=f(c)\) and \(\pi_B(\la f,g\ra(c))=g(c)\)
\end{enumerate}


We say that \(d\in A\bowtie B\) \textbf{represents} the pair \((a,b)\) if \(\pi_A(d)=a\) and \(\pi_B(d)=b\)
\end{definition}

In contrast to the usual definition of categorical products, the operation \(\la f,g\ra\) need not be
unique, since many elements of \(A\bowtie B\) may represent the same pair \((a,b)\). We do not formally
require that every \((a,b)\) is represented in \(A\bowtie B\), though in all cases of interest this will be
so. The reader is also warned that \(\pi_A\circ\la f,g\ra\) will not in general coincide with \(f\) .

TODO: examples
different bijections from \(\N\times\N\to\N\)

\begin{definition}[]
A \textbf{weak terminal} in a computability model \(\bC\) consists of a datatype \(I\in\abs{\bC}\) and an
element \(i\in I\) s.t. for any \(A\in\abs{\bC}\) the constant function \(\Lambda a.i\) is in \(\bC[A,I]\)
\end{definition}

If \(\bC\) has weak products and a weak terminal \((I,i)\), then for any \(A\in\abs{\bC}\) there is an
operation \(t_A\in\bC[A,I\bowtie A]\) s.t. \(\pi_A\circ t_A=\id_A\)
\subsubsection{Examples of Computability Models}
\label{sec:orgdc6614b}
\begin{examplle}[]
\label{3.1.5}
Model with single datatype \(\N\) and whose operations \(\N\rightharpoonup\N\) are precisely the
Turing-computable partial functions. The model has standard products, since the well-known
computable pairing operation
\begin{equation*}
\la m,n\ra=(m+n)(m+n+1)/2+m
\end{equation*}
defines a bijection \(\N\times\N\to\N\). Any element \(i\in\N\) may serve as a weak terminal,
since \(\Lambda n.i\) is computable
\end{examplle}

\begin{examplle}[]
\label{3.1.6}
untyped \(\lambda\)-calculus

Terms \(M\) of the \(\lambda\)-calculus are generated from a set of variable symbols \(x\) by means of the following
grammar:
\begin{equation*}
M::=x\mid MM'\mid\lambda x.M
\end{equation*}
Writing \(\sfL\) for the quotient set \(\Lambda/=_\beta\)

We write \(M[x\mapsto N]\) for the result of substituting \(N\) for all free occurrences of \(x\)
within \(M\)

We define \(\Lambda\)  to be the set of untyped \(\lambda\)-terms modulo \(\alpha\)-equivalence.

Let \(\sim\) be any equivalence relation on \(\Lambda\) with the following properties:
\begin{equation*}
(\lambda x.M)N\sim M[x\mapsto N],\quad M\sim N\Rightarrow PM\sim PN
\end{equation*}
\begin{enumerate}
\item \((\lambda x.x)M\sim M\)
\item If \(M\sim N\), then \((\lambda x.N)M\sim(\lambda x.M)N\) and hence \(N\sim M\).
\item If \(M\sim N\) and \(N\sim O\), then
\end{enumerate}

Then we have \(M\sim N\Rightarrow MP\sim NP\) since \((\lambda y.yP)M\sim(\lambda y.yP)N\Rightarrow MP\sim NP\).

As a example, we may define \(=_\beta\) to be the smallest equivalence relation \(\sim\) satisfying the
above properties and also
\begin{equation*}
M\sim N\Rightarrow \lambda x.M\sim\lambda x.N
\end{equation*}

Writing \([M]\) for the \(\sim\)-equivalence class of \(M\), any term \(P\in A\) induces a
well-defined mapping \([M]\mapsto[PM]\) on \(\Lambda/\sim\). The mappings induced by some \(P\) in this way are
called \textbf{\(\lambda\)-definable}

We may regard \(\Lambda/\sim\) as a total computability model: the sole datatype is \(\Lambda/\sim\) itself, and
the operations on it are exactly the \(\lambda\)-definable mappings. It also has weak products: a
pair \((M,N)\) may be represented by the term \(pair\;M\;N\) where \(pair=\lambda xyz.zxy\)
the terms \(fst=\lambda p.p(\lambda xy.x)\) and \(snd=\lambda p.p(\lambda xy.y)\). We can check that
\(fst(pair\; M\;N)\sim M\) and \(snd(pair\;M\;N)\sim N\)

We can also obtain a submodel \(\Lambda^0/\sim\) consisting of the equivalence classes of closed terms \(M\)
\end{examplle}

\begin{examplle}[]
\label{3.1.7}
Let \(B\) be any family of \textbf{base sets}, and let \(\la B\ra\) denote the family of sets generated
from \(B\) by adding the singleton set \(1=\{()\}\) and closing under binary products \(X\times Y\) and
set-theoretic function spaces \(Y^X\). We shall consider some computability models whose family
of datatypes is \(\la B\ra\)

First we may define a computability model \(\sfS(B)\) with \(\abs{\sfS(B)}=\la B\ra\) (often called
the \textbf{full set-theoretic model over} \(B\)) by letting \(\sfS(B)[X,Y]\) consist of all
set-theoretic functions \(X\to Y\) for \(X,Y\in\la B\ra\); that is, we consider all functions to be
computable. However this model is of limited interest since it does not represent an interesting
concept of computability

To do better we may start by noting that whatever the 'computable' functions between these sets
are supposed to be, it is reasonable to expect that they will enjoy the following closure
properties
\begin{enumerate}
\item For any \(X\in\la B\ra\), the unique function \(X\to 1\) is computable
\item For any \(X,Y\in\la B\ra\), the projections \(X\times Y\to X\), \(X\times Y\to Y\) is computable
\item For any \(X,Y\in\la B\ra\), the application function \(Y^X\times X\to Y\) is computable
\item If \(f:Z\to X\) and \(g:Z\to Y\) is computable, so is their pairing \((f,g):Z\to X\times Y\)
\item If \(f:X\to Y\) and \(g:Y\to Z\) are computable, so is their composition \(g\circ f:X\to Z\)
\item If \(f:Z\times X\to Y\) is computable, so is its transpose \(\hatf:Z\to Y^X\)
\end{enumerate}


One possible approach is therefore to start by specifying some set \(C\) of functions between
out datatypes that we wish to regard as ``basic computable operations'', and define a
computability model \(\sfK(B;C)\) over \(\la B\ra\) whose operations are exactly the functions
generated from \(C\) under the above closure conditions

Take \(B=\{\N\}\); we shall often denote \(\sfS(\{\N\})\) by \(\sfS\). Let \(C\) consist of the
following basic operations: the zero function \(\Lambda x.0:\N\to 1\), the successor function \(suc:\N\to\N\);
and for each \(X\in\la B\ra\), the primitive recursion operator \(rec_X:(X\times X^{X\times\N}\times\N)\to X\) defined by
\begin{align*}
&rec_X(x,f,0)=0\\
&rec_X(x,f,n+1)=f(rec_X(x,f,n),n)
\end{align*}
\end{examplle}
\subsubsection{Weakly Cartesian Closed Models}
\label{sec:org498e840}
\begin{definition}[]
\label{3.1.8}
Suppose \(\bC\) has weak products and a weak terminal. We say \(\bC\) is \textbf{weakly cartesian closed} if
it is endowed with the following for each \(A,B\in\abs{\bC}\):
\begin{itemize}
\item a choice of datatype \(A\Rightarrow B\in\abs{\bC}\)
\item a partial function \(\cdot_{AB}:(A\Rightarrow B)\times A\rhu B\), external to the structure of \(\bC\)
\end{itemize}


s.t. for any partial function \(f:C\times A\rhu B\) the following are equivalent
\begin{enumerate}
\item \(f\) is represented by some \(\barf:\C[C\bowtie A,B]\), in the sense that if \(d\)
represents \((c,a)\) then \(\barf(d)\simeq f(c,a)\)
\item \(f\) is represented by some total operation \(\hatf:\bC[C,A\Rightarrow B]\), in the sense that
\begin{equation*}
\forall c\in C,a\in A\quad\hatf(c)\cdot_{AB}a\simeq f(c,a)
\end{equation*}
\end{enumerate}
\end{definition}

\(\cdot_{AB}\) is represented by an operation \(app_{AB}\in\C[(A\Rightarrow B)\bowtie A,B]\)

Crucially, and in contrast to the definition of cartesian closed category, there is no
requirement that \(f\) is unique. This highlights an important feature of our framework: in many
models of interest, elements of \(A\Rightarrow B\) will be \textbf{intensional} objects (programs or algorithms),
and there may be many intensional objects giving rise to the same partial function \(A\to B\)

\begin{examplle}[]
Consider again the model of Example \ref{3.1.5}, comprising the partial Turing-computable
functions \(\N\rhu\N\). Here \(\N\Rightarrow\N\) can only be \(\N\), so we must provide a suitable
operation \(\cdot:\N\times\N\to\N\). This is done using the concept of a \textbf{universal Turing machine}.
Let \(T_0, T_1,\dots\)  be some sensibly chosen enumeration of all Turing machines for computing
partial functions \(\N\rhu\N\). Then there is a Turing machine that accepts two inputs \(e,a\) and
returns the result of applying the machine \(T_e\) to the single input \(a\). We may therefore
take \(\cdot\) to be the partial function computed by \(U\)

Clearly the partial functions \(f:\N\times\N\rhu\N\)  representable within the model via the pairing
operation from Example \ref{3.1.5} are just the partial computable ones. We may also see that
these coincide exactly with those represented by some total computable \(\barf:\N\to\N\), in the
sense that \(f(c,a)\simeq\tilf(c)\cdot a\).

\(\Leftarrow\): Given a computable \(\tilf\) the operation \(\Lambda(c,a).\tilf(c)\cdot a\) is clearly computable

\(\Rightarrow\): \(s\)-\(m\)-\(n\) theorem

When endowed with this weakly cartisian closed structure, this computability model is known as
\textbf{Kleene's first model} of \(K_1\)
\end{examplle}

\begin{examplle}[]
\label{3.1.10}
Now consider the model \(\Lambda/\sim\) ; we shall write \(\sfL\) for the set \(\Lambda/\sim\) considered as the
sole datatype in this model. Set \(\sfL\Rightarrow\sfL=\sfL\bowtie\sfL=\sfL\). We may obtain a weakly cartesian
closed structure by letting \(\cdot\) be given by application. If \(M\in\Lambda\) induces an operation
in \([\sfL\bowtie \sfL,\sfL]\) representing some \(f:\sfL\times\sfL\to\sfL\), then \(\lambda x.\lambda y.M(pair\;x\;y)\)
induces the corresponding operation in \([\sfL,\sfL\Rightarrow\sfL]\); conversely if \(N\) induces an
operation in \([\sfL,\sfL\Rightarrow\sfL]\) then \(\lambda z.N(fst\;z)(snd\;z)\) induces the corresponding one
in \([\sfL\bowtie\sfL,\sfL]\)
\end{examplle}
TODO
\begin{examplle}[]

\end{examplle}
\subsubsection{Higher-Order Models}
\label{sec:orgbb01ede}
\begin{definition}[]
A \textbf{higher-order structure} is a computability model \(\bC\) possessing a weak terminal \((I,i)\) and
endowed with the following for each \(A,B\in\abs{\bC}\)
\begin{itemize}
\item a choice of datatype \(A\Rightarrow B\in\abs{\bC}\)
\item a partial function \(\cdot_{AB}:(A\Rightarrow B)\times A\rhu B\)
\end{itemize}
\end{definition}

We treat \(\Rightarrow\) as right-associative and \(\cdot\) as left-associative

The significance of the weak terminal \((I,i)\) here is that it allows us to pick out a
subset \(A^\sharp\) of each \(A\in\abs{\bC}\), namely the set of elements of the form \(f(i)\)
where \(f\in\bC[I,A]\) and \(f(i)\downarrow\).

This is independent of the choice of \((I,i)\): if \(a=f(i)\) and \((J,j)\) is another weak
terminal, then composing \(f\) with \(\Lambda x.i\in\bC[J,I]\) gives \(f'\in\bC[J,A]\) with \(f'(j)=a\).

Intuitively, we think of \(A^\sharp\) as playing the role of the 'computable' elements of \(A\), and \(i\) as
some generic computable element.
On the one hand, if \(a\in A\) were computable, we would expect each
\(\Lambda x.a\) to be computable so that \(a\in A^\sharp\); on the other hand, the image of a computable element
under a computable operation should be computable, so that every element of \(A^\sharp\) is
computable.

Any weakly cartesian closed model \(\bC\) is a higher-structure.

\begin{definition}[]
\label{3.1.13}
A \textbf{higher-order (computability) model} is a higher-order structure \(\bC\) satisfying the following
conditions for some (or equivalently any) weak terminal \((I,i)\)
\begin{enumerate}
\item A partial function \(f:A\rhu B\) is present in \(\bC[A,B]\) iff there
exists \(\hatf\in\bC[I,A\Rightarrow B]\) s.t.
\begin{equation*}
\hatf(i)\downarrow,\quad\forall a\in A.\hatf(i)\cdot a\simeq f(a)
\end{equation*}
\item For any \(A,B\in\abs{\bC}\), there exists \(k_{AB}\in(A\Rightarrow B\Rightarrow A)^\sharp\) s.t.
\begin{equation*}
\forall a.k_{AB}\cdot a\downarrow,\quad \forall a,b.k_{AB}\cdot a\cdot b=a
\end{equation*}
\item For any \(A,B,C\in\abs{\bC}\) there exits
\begin{equation*}
s_{ABC}\in((A\Rightarrow B\Rightarrow C)\Rightarrow(A\Rightarrow B)\Rightarrow(A\Rightarrow C))^\sharp
\end{equation*}
s.t.
\begin{equation*}
\forall f,g.s_{ABC}\cdot f\cdot g\downarrow,\quad\forall f,g,a.s_{ABC}\cdot f\cdot g\cdot a\simeq(f\cdot a)\cdot(g\cdot a)
\end{equation*}
\end{enumerate}
\end{definition}

The elements \(k\) and \(s\) correspond to combinators from combinatory logic.

\(k\) allows us to construct \textbf{constant} maps in a computable way

A possible intuition for \(s\) is that it somehow does duty for an application
operation \((B\Rightarrow C)\times B\rhu C\)
within \(\bC\) itself, where the application may be performed uniformly in a parameter of type A.p

\begin{proposition}[]
\label{3.1.14}
Suppose \(\bC\) is a higher-order model
\begin{enumerate}
\item for any \(j<m\), there exists \(\pi_j^m\in(A_0\Rightarrow\cdots\Rightarrow A_{m-1}\Rightarrow A_j)^\sharp\) s.t.
\begin{equation*}
\forall a_0,\dots,a_{m-1}.\pi_j^m\cdot a_0\cdot\dots\cdot a_{m-1}=a_j
\end{equation*}
\item Suppose \(m,n>0\). Given
\begin{gather*}
f_j\in(A_0\Rightarrow\dots\Rightarrow A_{m-1}\Rightarrow B_j)^\sharp,\quad(j=0,\dots,n-1),\\
g\in(B_0\Rightarrow\dots\Rightarrow B_{n-1}\Rightarrow C)^\sharp
\end{gather*}
there exists \(h\in (A_0\Rightarrow\dots\Rightarrow A_{m-1}\Rightarrow C)^\sharp\) s.t.
\begin{equation*}
\forall a_0,\dots,a_{m-1}.h\cdot a_0\cdot\dots\cdot a_{m-1}\simeq g\cdot(f_0\cdot a_0\cdot\dots\cdot a_{m-1})\cdot\dots\cdot(f_{n-1}\cdot a_0\cdot\dots\cdot a_{m-1})
\end{equation*}
\item Suppose \(m>0\). For any element \(f\in (A_0\Rightarrow\cdots\Rightarrow A_{m-1}\Rightarrow B)^\sharp\), there
exists \(f^\dagger\in(A_0\Rightarrow\dots\Rightarrow A_{m-1}\Rightarrow B)^\sharp\) s.t.
\begin{gather*}
\forall a_0,\dots,a_{m-1}.f^\dagger\cdot a_0\cdot\dots\cdot a_{m-1}\simeq f\cdot a_0\cdot\dots\cdot a_{m-1}\\
\forall k<m.\forall a_0,\dots,a_{k-1}.f^\dagger\cdot a_0\cdot\dots\cdot a_{k-1}
\end{gather*}
\end{enumerate}
\end{proposition}

If \(\bC,\bD\) are higher-order structures, we say \(\bC\) is a \textbf{full substructure} of \(\bD\) if
\begin{itemize}
\item \(\abs{\bC}\subseteq\abs{\bD}\)
\item \(\bC[A,B]=\bD[A,B]\) for all \(A,B\in\abs{\bC}\)
\item some (or equivalently any) weak terminal in \(\bC\) is also a weak terminal in \(\bD\)
\item the meaning of \(A\Rightarrow B\) and \(\cdot_{AB}\) in \(\bC\) and \(\bD\) coincide
\end{itemize}


Note that if \((I,i)\) and \((J,j)\) are weak terminals in \(\bC\) then \(\Lambda x.j\in\bC[I,J]\), so
if \((I,i)\) is a weak terminal in \(\bD\) then so is \((J,j)\)

\begin{theorem}[]
A higher-order structure is a higher-order model iff it is a full substructure of a weakly
cartesian closed model
\end{theorem}

\begin{proof}
Let \(\bC\) be a higher-order structure.

\(\Leftarrow\): suppose \(\bD\) is weakly cartesian closed and \(\bC\) is a
full substructure of \(\bD\) with a weak terminal \((I,i)\)
\begin{enumerate}
\item For any \(f\in\bC[A,B]=\bD[A,B]\) we have that \(f\circ\pi_A\in\bD[I\bowtie A,B]\) represents \(\Lambda(x,a).f(a)\),
which by definition \ref{3.1.8} is in turn represented by some total \(\hatf\in\bD[I,A\Rightarrow B]\).

Conversely, given \(f:A\rhu B\) and \(\hatf\in\bC[I,A\Rightarrow B]\) with \(\hatf(i)\downarrow\)
and \(\hatf(i)\cdot a\simeq f(a)\) for all \(a\), take \(\hatg=\hatf\circ(\Lambda x.i)\in\bC[I,A\Rightarrow B]=\bD[I,A\Rightarrow B]\) so
that \(\hatg\) is total and represents \(g=\Lambda(x,a).f(a):I\times A\rhu B\). Now
let \(\barg\in\bD[I\bowtie A,B]\) also represents \(g\). Then \(\barg\circ\la\Lambda a.i,\id_A\ra\in\bD[A,B]=\bC[A,B]\) and
it is routine to check that \(\barg\circ\la\Lambda a.i,\id_A\ra=f\)

\item Suppose \(A,B\in\abs{\bC}\). Let \(k'\in\bD[A,B\Rightarrow A]\) correspond to \(\pi_A\in\bD[A\bowtie B,A]\) as in
definition \ref{3.1.8}, then \(k'(a)\cdot b\simeq\pi_A(d)\). Let \(\hatk'\in\bD[I,A\Rightarrow(B\Rightarrow A)]\) correspond
to \(k'\circ\pi_A'\in\bD[I\bowtie A,B\Rightarrow A]\) where \(\pi_A'\in\bD[I\bowtie A,A]\) and take \(k=\hatk'(i)\)
\(k\cdot a\cdot b=\hatk'(i)\cdot a\cdot b=(k'\circ\pi_A'(i,a))\cdot b=k'(a)\cdot b=a\)

\item 
\end{enumerate}

\(\Rightarrow\): Suppose \(\bC\) is a higher-order model, with \((I,i)\) a weak terminal. We build a weakly
cartesian closed model \(\bC^\times\) into which \(\bC\) embeds fully as follows:
\begin{itemize}
\item Datatypes of \(\bC^\times\) are sets \(A_0\times\dots\times A_{m-1}\), where \(m>0\) and \(A_0,\dots,A_{m-1}\in\abs{\bC}\)
\item If \(D=A_0\times\dots\times A_{m-1}\) and \(E=B_0\times\dots\times B_{n-1}\) where \(m,n>0\) the operations
in \(\bC^\times[D,E]\) are those partial functions \(f:D\rhu E\) of the form
\begin{equation*}
f=\Lambda(a_0,\dots,a_{m-1}).(f_0\cdot a_0\cdot\dots\cdot a_{m-1},\dots,f_{n-1}\cdot a_0\cdot\dots\cdot a_{m-1})
\end{equation*}
where \(f_j\in(A_0\Rightarrow\dots\Rightarrow A_{m-1}\Rightarrow B_j)^\sharp\) for each \(j\); we say that \(f_0,\dots,f_{n-1}\) \textbf{witness}
the operation \(f\). Note that for \((f_0\cdot a_0\cdot\dots\cdot a_{m-1},\dots,f_{n-1}\cdot a_0\cdot\dots\cdot a_{m-1})\) to be
defined, it is necessary that all its components be defined
\end{itemize}


It remains to check the relevant properties of \(\bC^\times\). That \(\bC^\times\) is a computability model is
straightforward: the existence of identities follows from part 1 of Proposition \ref{3.1.14}
and composition from part 2. \(\bC^\times\) has standard products and that \((I,i)\) is a weak terminal
in \(\bC^\times\).

Now let's show that \(\bC^\times\) is weakly cartesian closed. Given \(D=A_0\times\dots\times A_{m-1}\)
and \(E=B_0\times\dots\times B_{n-1}\) with \(m,n>0\), take \(C_j=A_0\Rightarrow\dots\Rightarrow A_{m-1}\Rightarrow B_j\) for each \(j\), and
let \(D\Rightarrow E\) be the set of tuples \((f_0,\dots,f_{n-1})\in C_0\times\dots\times C_{n-1}\) witnessing operations
in \(\bC^\times[D,E]\). The application \(\cdot_{DE}\) is then given by
\begin{equation*}
(f_0,\dots,f_{n-1})\cdot_{DE}(a_0,\dots,a_{m-1})\simeq(f_0\cdot a_0\cdot\dots\cdot a_{m-1},\dots,f_{n-1}\cdot a_0\cdot\dots\cdot a_{m-1})
\end{equation*}

Next, given an operation \(g\in\bC^\times[G\times D,E]\) witnessed by operations \(g_0,\dots,g_{n-1}\) in \(\bC\),
take \(g_0^\dagger,\dots,g_{n-1}^\dagger\) as in Proposition \ref{3.1.14} (3); then \(g_0^\dagger,\dots,g_{n-1}^\dagger\) witness
the corresponding total operation \(\hatg\in\bC^\times[G,D\Rightarrow E]\). Conversely, the witnesses for any such
total \(\hatg\) also witness the corresponding \(g\)
\end{proof}
\subsubsection{Typed Partial Combinatory Algebras}
\label{sec:orgb94522d}
The following definition captures roughly what is left of a higher-order model once the
operations are discarded

\begin{definition}[]
\begin{enumerate}
\item A \textbf{partial applicative structure} \(\bA\) consists of
\begin{itemize}
\item an inhabited family \(\abs{\bA}\) of datatypes \(A,B,\dots\) (indexed by some set \(T\))
\item a (right-associative) binary operation \(\Rightarrow\) on \(\abs{\bA}\)
\item for each \(A,B\in\abs{\bA}\), a partial function \(\cdot_{AB}:(A\Rightarrow B)\times A\rhu B\)
\end{itemize}
\item A \textbf{typed partial combinatory algebra} (TPCA) is a partial applicative structure \(\bA\)
satisfying the following conditions
\begin{enumerate}
\item For any \(A,B\in\abs{\bA}\), there exists \(k_{AB}\in A\Rightarrow B\Rightarrow A\) s.t.
\begin{equation*}
\forall a.k\cdot a\downarrow,\quad\forall a,b.k\cdot a\cdot b=a
\end{equation*}
\item For any \(A,B,C\in\abs{\bA}\), there exists \(s_{ABC}\in(A\Rightarrow B\Rightarrow C)\Rightarrow(A\Rightarrow B)\Rightarrow(A\Rightarrow C)\) s.t.
\begin{equation*}
\forall f,g. s\cdot f\cdot g\downarrow,\quad\forall f,g,a.s\cdot f\cdot g\cdot a\simeq(f\cdot a)\cdot(g\cdot a)
\end{equation*}
\end{enumerate}
\end{enumerate}


A TPCA is \textbf{total} if all the application operations \(\cdot_{AB}\) are total
\end{definition}
\end{document}
